/*
Lavaca 1.0.4
Copyright (c) 2012 Mutual Mobile

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Contains components from or inspired by:

Simple Reset
(c) 2011 Eric Meyer
Released to public domain

jQuery v1.7.1
(c) 2011, John Resig
Dual licensed under the MIT or GPL Version 2 licenses.

Sizzle.js
(c) 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL licenses.

Backbone.js 0.9.1 and Underscore.js 1.3.1
(c) 2012, Jeremy Ashkenas, DocumentCloud Inc
Released under the MIT license.

Dust.js v0.3.0
(c) 2010, Aleksander Williams
Released under the MIT license.

Zepto.js 0.8.0
(c) 2011 Thomas Fuchs
Released under the MIT license

ChildBrowser
(c) 2012 Jesse MacFadyen, Nitobi
Released under the MIT license

lz77.js
(c) 2009 Olle Törnström
Released under the MIT license

iScroll 4.1.9
(c) 2011 Matteo Spinelli
Released under the MIT license
*/
(function(d){String.prototype.trim===d&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});Array.prototype.reduce===d&&(Array.prototype.reduce=function(f){if(this===void 0||this===null)throw new TypeError;var h=Object(this),e=h.length>>>0,b=0,i;if(typeof f!="function")throw new TypeError;if(e==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)i=arguments[1];else{do{if(b in h){i=h[b++];break}if(++b>=e)throw new TypeError;}while(1)}for(;b<e;){b in h&&
(i=f.call(d,i,h[b],b,h));b++}return i})})();
var Zepto=function(){function d(a){return"[object Function]"==D.call(a)}function f(a){return a instanceof Object}function h(a){var c,b;if("[object Object]"!==D.call(a))return!1;b=d(a.constructor)&&a.constructor.prototype;if(!b||!hasOwnProperty.call(b,"isPrototypeOf"))return!1;for(c in a);return c===k||hasOwnProperty.call(a,c)}function e(a){return a instanceof Array}function b(a){return"number"==typeof a.length}function i(a){return a.filter(function(a){return a!==k&&null!==a})}function a(a){return a.replace(/::/g,
"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(a){return a in y?y[a]:y[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function g(a,c){return c===k?l(a):l(a).filter(c)}function n(a,c,b,g){return d(c)?c.call(a,b,g):c}function j(a,c,b){var g=a%2?c:c.parentNode;g?g.insertBefore(b,!a?c.nextSibling:1==a?g.firstChild:2==a?c:null):l(b).remove()}function o(a,c){c(a);for(var b in a.childNodes)o(a.childNodes[b],c)}var k,m,l,q,p=[],t=p.slice,s=
window.document,u={},y={},A=s.defaultView.getComputedStyle,B={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,H=[1,3,8,9,11],z=s.createElement("table"),F=s.createElement("tr"),C={tr:s.createElement("tbody"),tbody:z,thead:z,tfoot:z,td:F,th:F,"*":s.createElement("div")},r=/complete|loaded|interactive/,G=/^\.([\w-]+)$/,w=/^#([\w-]+)$/,I=/^[\w-]+$/,D={}.toString,v={},K,x,L=s.createElement("div");v.matches=function(a,c){if(!a||1!==a.nodeType)return!1;
var b=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(b)return b.call(a,c);var g;g=a.parentNode;(b=!g)&&(g=L).appendChild(a);g=~v.qsa(g,c).indexOf(a);b&&L.removeChild(a);return g};K=function(a){return a.replace(/-+(.)?/g,function(a,c){return c?c.toUpperCase():""})};x=function(a){return a.filter(function(c,b){return a.indexOf(c)==b})};v.fragment=function(a,c){c===k&&(c=E.test(a)&&RegExp.$1);c in C||(c="*");var b=C[c];b.innerHTML=""+a;return l.each(t.call(b.childNodes),
function(){b.removeChild(this)})};v.Z=function(a,c){a=a||[];a.__proto__=arguments.callee.prototype;a.selector=c||"";return a};v.isZ=function(a){return a instanceof v.Z};v.init=function(a,c){if(a){if(d(a))return l(s).ready(a);if(v.isZ(a))return a;var b;if(e(a))b=i(a);else if(h(a))b=[l.extend({},a)],a=null;else if(0<=H.indexOf(a.nodeType)||a===window)b=[a],a=null;else if(E.test(a))b=v.fragment(a.trim(),RegExp.$1),a=null;else{if(c!==k)return l(c).find(a);b=v.qsa(s,a)}return v.Z(b,a)}return v.Z()};l=
function(a,c){return v.init(a,c)};l.extend=function(a){t.call(arguments,1).forEach(function(c){for(m in c)c[m]!==k&&(a[m]=c[m])});return a};v.qsa=function(a,c){var b;return a===s&&w.test(c)?(b=a.getElementById(RegExp.$1))?[b]:p:1!==a.nodeType&&9!==a.nodeType?p:t.call(G.test(c)?a.getElementsByClassName(RegExp.$1):I.test(c)?a.getElementsByTagName(c):a.querySelectorAll(c))};l.isFunction=d;l.isObject=f;l.isArray=e;l.isPlainObject=h;l.inArray=function(a,c,b){return p.indexOf.call(c,a,b)};l.trim=function(a){return a.trim()};
l.uuid=0;l.map=function(a,c){var g,d=[],e;if(b(a))for(e=0;e<a.length;e++)g=c(a[e],e),null!=g&&d.push(g);else for(e in a)g=c(a[e],e),null!=g&&d.push(g);return 0<d.length?[].concat.apply([],d):d};l.each=function(a,c){var g;if(b(a))for(g=0;g<a.length&&!1!==c.call(a[g],g,a[g]);g++);else for(g in a)if(!1===c.call(a[g],g,a[g]))break;return a};l.fn={forEach:p.forEach,reduce:p.reduce,push:p.push,indexOf:p.indexOf,concat:p.concat,map:function(a){return l.map(this,function(c,b){return a.call(c,b,c)})},slice:function(){return l(t.apply(this,
arguments))},ready:function(a){r.test(s.readyState)?a(l):s.addEventListener("DOMContentLoaded",function(){a(l)},!1);return this},get:function(a){return a===k?t.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){this.forEach(function(c,b){a.call(c,b,c)});return this},filter:function(a){return l([].filter.call(this,function(c){return v.matches(c,
a)}))},add:function(a,c){return l(x(this.concat(l(a,c))))},is:function(a){return 0<this.length&&v.matches(this[0],a)},not:function(a){var c=[];if(d(a)&&a.call!==k)this.each(function(b){a.call(this,b)||c.push(this)});else{var g="string"==typeof a?this.filter(a):b(a)&&d(a.item)?t.call(a):l(a);this.forEach(function(a){0>g.indexOf(a)&&c.push(a)})}return l(c)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!f(a)?a:l(a)},last:function(){var a=this[this.length-
1];return a&&!f(a)?a:l(a)},find:function(a){var c;c=1==this.length?v.qsa(this[0],a):this.map(function(){return v.qsa(this,a)});return l(c)},closest:function(a,c){for(var b=this[0];b&&!v.matches(b,a);)b=b!==c&&b!==s&&b.parentNode;return l(b)},parents:function(a){for(var c=[],b=this;0<b.length;)b=l.map(b,function(a){if((a=a.parentNode)&&a!==s&&0>c.indexOf(a))return c.push(a),a});return g(c,a)},parent:function(a){return g(x(this.pluck("parentNode")),a)},children:function(a){return g(this.map(function(){return t.call(this.children)}),
a)},siblings:function(a){return g(this.map(function(a,c){return t.call(c.parentNode.children).filter(function(a){return a!==c})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==A(this,"").getPropertyValue("display")){var a=this.style,c=this.nodeName,b,g;u[c]||(b=s.createElement(c),s.body.appendChild(b),g=
A(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==g&&(g="block"),u[c]=g);a.display=u[c]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){l(this).wrapAll(l(a)[0].cloneNode(!1))})},wrapAll:function(a){this[0]&&(l(this[0]).before(a=l(a)),a.append(this));return this},unwrap:function(){this.parent().each(function(){l(this).replaceWith(l(this).children())});return this},clone:function(){return l(this.map(function(){return this.cloneNode(!0)}))},
hide:function(){return this.css("display","none")},toggle:function(a){return(a===k?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return l(this.pluck("previousElementSibling"))},next:function(){return l(this.pluck("nextElementSibling"))},html:function(a){return a===k?0<this.length?this[0].innerHTML:null:this.each(function(c){var b=this.innerHTML;l(this).empty().append(n(this,a,c,b))})},text:function(a){return a===k?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=
a})},attr:function(a,c){var b;return"string"==typeof a&&c===k?0==this.length||1!==this[0].nodeType?k:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(b=this[0].getAttribute(a))&&a in this[0]?this[0][a]:b:this.each(function(b){if(1===this.nodeType)if(f(a))for(m in a)this.setAttribute(m,a[m]);else this.setAttribute(a,n(this,c,b,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,c){return c===k?this[0]?this[0][a]:
k:this.each(function(b){this[a]=n(this,c,b,this[a])})},data:function(c,b){var g=this.attr("data-"+a(c),b);return null!==g?g:k},val:function(a){return a===k?0<this.length?this[0].value:k:this.each(function(c){this.value=n(this,a,c,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(c,b){if(b===k&&"string"==typeof c)return 0==this.length?k:
this[0].style[K(c)]||A(this[0],"").getPropertyValue(c);var g="";for(m in c)"string"==typeof c[m]&&""==c[m]?this.each(function(){this.style.removeProperty(a(m))}):g+=a(m)+":"+("number"==typeof c[m]&&!B[a(m)]?c[m]+"px":c[m])+";";"string"==typeof c&&(""==b?this.each(function(){this.style.removeProperty(a(c))}):g=a(c)+":"+("number"==typeof b&&!B[a(c)]?b+"px":b));return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(l(a)[0]):this.parent().children().indexOf(this[0])},
hasClass:function(a){return 1>this.length?!1:c(a).test(this[0].className)},addClass:function(a){return this.each(function(c){q=[];var b=this.className;n(this,a,c,b).split(/\s+/g).forEach(function(a){l(this).hasClass(a)||q.push(a)},this);q.length&&(this.className+=(b?" ":"")+q.join(" "))})},removeClass:function(a){return this.each(function(b){if(a===k)return this.className="";q=this.className;n(this,a,b,q).split(/\s+/g).forEach(function(a){q=q.replace(c(a)," ")});this.className=q.trim()})},toggleClass:function(a,
c){return this.each(function(b){b=n(this,a,b,this.className);(c===k?!l(this).hasClass(b):c)?l(this).addClass(b):l(this).removeClass(b)})}};["width","height"].forEach(function(a){l.fn[a]=function(c){var b,g=a.replace(/./,function(a){return a[0].toUpperCase()});return c===k?this[0]==window?window["inner"+g]:this[0]==s?s.documentElement["offset"+g]:(b=this.offset())&&b[a]:this.each(function(b){var g=l(this);g.css(a,n(this,c,b,g[a]()))})}});["after","prepend","before","append"].forEach(function(a,c){l.fn[a]=
function(){var a=l.map(arguments,function(a){return f(a)?a:v.fragment(a)});if(1>a.length)return this;var b=this.length,g=1<b,d=2>c;return this.each(function(e,i){for(var f=0;f<a.length;f++){var h=a[d?a.length-f-1:f];o(h,function(a){null!=a.nodeName&&("SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type))&&window.eval.call(window,a.innerHTML)});g&&e<b-1&&(h=h.cloneNode(!0));j(c,i,h)}})};l.fn[c%2?a+"To":"insert"+(c?"Before":"After")]=function(c){l(c)[a](this);return this}});v.Z.prototype=
l.fn;v.camelize=K;v.uniq=x;l.zepto=v;return l}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(d){function f(a){return a._zid||(a._zid=j++)}function h(a,c,b,g){c=e(c);if(c.ns)var d=RegExp("(?:^| )"+c.ns.replace(" "," .* ?")+"(?: |$)");return(n[f(a)]||[]).filter(function(a){return a&&(!c.e||a.e==c.e)&&(!c.ns||d.test(a.ns))&&(!b||f(a.fn)===f(b))&&(!g||a.sel==g)})}function e(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function b(a,c,b){d.isObject(a)?d.each(a,b):a.split(/\s/).forEach(function(a){b(a,c)})}function i(a,c,g,i,j,h){var h=!!h,o=f(a),k=n[o]||(n[o]=
[]);b(c,g,function(c,b){var g=j&&j(b,c),f=g||b,n=function(c){var b=f.apply(a,[c].concat(c.data));!1===b&&c.preventDefault();return b},g=d.extend(e(c),{fn:b,proxy:n,sel:i,del:g,i:k.length});k.push(g);a.addEventListener(g.e,n,h)})}function a(a,c,g,d){var e=f(a);b(c||"",g,function(c,b){h(a,c,b,d).forEach(function(c){delete n[e][c.i];a.removeEventListener(c.e,c.proxy,!1)})})}function c(a){var c=d.extend({originalEvent:a},a);d.each(l,function(b,g){c[b]=function(){this[g]=k;return a[b].apply(a,arguments)};
c[g]=m});return c}function g(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var c=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0;c.call(this)}}}var n={},j=1,o={};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents";d.event={add:i,remove:a};d.proxy=function(a,c){if(d.isFunction(a)){var b=function(){return a.apply(c,arguments)};b._zid=f(a);return b}if("string"==typeof c)return d.proxy(a[c],a);throw new TypeError("expected function");};d.fn.bind=function(a,c){return this.each(function(){i(this,
a,c)})};d.fn.unbind=function(c,b){return this.each(function(){a(this,c,b)})};d.fn.one=function(c,b){return this.each(function(g,d){i(this,c,b,null,function(c,b){return function(){var g=c.apply(d,arguments);a(d,b,c);return g}})})};var k=function(){return!0},m=function(){return!1},l={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};d.fn.delegate=function(a,b,g){var e=!1;if("blur"==b||"focus"==b)d.iswebkit?b="blur"==
b?"focusout":"focus"==b?"focusin":b:e=!0;return this.each(function(j,h){i(h,b,g,a,function(b){return function(g){var e,i=d(g.target).closest(a,h).get(0);if(i)return e=d.extend(c(g),{currentTarget:i,liveFired:h}),b.apply(i,[e].concat([].slice.call(arguments,1)))}},e)})};d.fn.undelegate=function(c,b,g){return this.each(function(){a(this,b,g,c)})};d.fn.live=function(a,c){d(document.body).delegate(this.selector,a,c);return this};d.fn.die=function(a,c){d(document.body).undelegate(this.selector,a,c);return this};
d.fn.on=function(a,c,b){return void 0==c||d.isFunction(c)?this.bind(a,c):this.delegate(c,a,b)};d.fn.off=function(a,c,b){return void 0==c||d.isFunction(c)?this.unbind(a,c):this.undelegate(c,a,b)};d.fn.trigger=function(a,c){"string"==typeof a&&(a=d.Event(a));g(a);a.data=c;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(a)})};d.fn.triggerHandler=function(a,b){var g,e;this.each(function(i,j){g=c("string"==typeof a?d.Event(a):a);g.data=b;g.target=j;d.each(h(j,a.type||a),function(a,
c){e=c.proxy(g);if(g.isImmediatePropagationStopped())return!1})});return e};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(a){d.fn[a]=function(c){return this.bind(a,c)}});["focus","blur"].forEach(function(a){d.fn[a]=function(c){if(c)this.bind(a,c);else if(this.length)try{this.get(0)[a]()}catch(b){}return this}});d.Event=function(a,c){var b=document.createEvent(o[a]||"Events"),
g=!0;if(c)for(var d in c)"bubbles"==d?g=!!c[d]:b[d]=c[d];b.initEvent(a,g,!0,null,null,null,null,null,null,null,null,null,null,null,null);return b}})(Zepto);
(function(d){function f(d){var e=this.os={},b=this.browser={},i=d.match(/WebKit\/([\d.]+)/),a=d.match(/(Android)\s+([\d.]+)/),c=d.match(/(iPad).*OS\s([\d_]+)/),g=!c&&d.match(/(iPhone\sOS)\s([\d_]+)/),f=d.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),j=f&&d.match(/TouchPad/),o=d.match(/Kindle\/([\d.]+)/),k=d.match(/Silk\/([\d._]+)/),m=d.match(/(BlackBerry).*Version\/([\d.]+)/);if(b.webkit=!!i)b.version=i[1];a&&(e.android=!0,e.version=a[2]);g&&(e.ios=e.iphone=!0,e.version=g[2].replace(/_/g,"."));c&&(e.ios=e.ipad=
!0,e.version=c[2].replace(/_/g,"."));f&&(e.webos=!0,e.version=f[2]);j&&(e.touchpad=!0);m&&(e.blackberry=!0,e.version=m[2]);o&&(e.kindle=!0,e.version=o[1]);k&&(b.silk=!0,b.version=k[1]);!k&&(e.android&&d.match(/Kindle Fire/))&&(b.silk=!0)}f.call(d,navigator.userAgent);d.__detect=f})(Zepto);
(function(d,f){var h="",e,b=window.document.createElement("div"),i=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,a={};d.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,g){if(b.style[a+"TransitionProperty"]!==f)return h="-"+a.toLowerCase()+"-",e=g,!1});a[h+"transition-property"]=a[h+"transition-duration"]=a[h+"transition-timing-function"]=a[h+"animation-name"]=a[h+"animation-duration"]="";d.fx={off:e===f&&b.style.transitionProperty===f,cssPrefix:h,transitionEnd:e?
e+"TransitionEnd":"transitionend",animationEnd:e?e+"AnimationEnd":"animationend"};d.fn.animate=function(a,b,e,i){d.isObject(b)&&(e=b.easing,i=b.complete,b=b.duration);b&&(b/=1E3);return this.anim(a,b,e,i)};d.fn.anim=function(c,b,e,j){var o,k={},m,l=this,q,p=d.fx.transitionEnd;b===f&&(b=0.4);d.fx.off&&(b=0);if("string"==typeof c)k[h+"animation-name"]=c,k[h+"animation-duration"]=b+"s",p=d.fx.animationEnd;else{for(m in c)i.test(m)?(o||(o=[]),o.push(m+"("+c[m]+")")):k[m]=c[m];o&&(k[h+"transform"]=o.join(" "));
!d.fx.off&&"object"===typeof c&&(k[h+"transition-property"]=Object.keys(c).join(", "),k[h+"transition-duration"]=b+"s",k[h+"transition-timing-function"]=e||"linear")}q=function(c){if("undefined"!==typeof c){if(c.target!==c.currentTarget)return;d(c.target).unbind(p,arguments.callee)}d(this).css(a);j&&j.call(this)};0<b&&this.bind(p,q);setTimeout(function(){l.css(k);0>=b&&setTimeout(function(){l.each(function(){q.call(this)})},0)},0);return this};b=null})(Zepto);
(function(d){function f(a,c,b,g){if(a.global)return a=c||m,b=d.Event(b),d(a).trigger(b,g),!b.defaultPrevented}function h(a){a.global&&0===d.active++&&f(a,null,"ajaxStart")}function e(a,c){var b=c.context;if(!1===c.beforeSend.call(b,a,c)||!1===f(c,b,"ajaxBeforeSend",[a,c]))return!1;f(c,b,"ajaxSend",[a,c])}function b(c,b,g){var d=g.context;g.success.call(d,c,"success",b);f(g,d,"ajaxSuccess",[b,g,c]);a("success",b,g)}function i(c,b,g,d){var e=d.context;d.error.call(e,g,b,c);f(d,e,"ajaxError",[g,d,c]);
a(b,g,d)}function a(a,c,b){var g=b.context;b.complete.call(g,c,a);f(b,g,"ajaxComplete",[c,b]);b.global&&!--d.active&&f(b,null,"ajaxStop")}function c(){}function g(a){return a&&(a==y?"html":a==u?"json":t.test(a)?"script":s.test(a)&&"xml")||"text"}function n(a){k(a.data)&&(a.data=d.param(a.data));if(a.data&&(!a.type||"GET"==a.type.toUpperCase()))a.url=(a.url+"&"+a.data).replace(/[&?]{1,2}/,"?")}function j(a,c,b,g){var e=d.isArray(c);d.each(c,function(c,i){g&&(c=b?g:g+"["+(e?"":c)+"]");!g&&e?a.add(i.name,
i.value):(b?d.isArray(i):k(i))?j(a,i,b,c):a.add(c,i)})}var o=0,k=d.isObject,m=window.document,l,q,p=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,t=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,u="application/json",y="text/html",A=/^\s*$/;d.active=0;d.ajaxJSONP=function(g){var e="jsonp"+ ++o,i=m.createElement("script"),j={abort:function(){d(i).remove();e in window&&(window[e]=c);a("abort",j,g)}},f;g.error&&(i.onerror=function(){j.abort();g.error()});window[e]=function(a){clearTimeout(f);
d(i).remove();delete window[e];b(a,j,g)};n(g);i.src=g.url.replace(/=\?/,"="+e);d("head").append(i);0<g.timeout&&(f=setTimeout(function(){j.abort();a("timeout",j,g)},g.timeout));return j};d.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:u,xml:"application/xml, text/xml",html:y,text:"text/plain"},crossDomain:!1,timeout:0};d.ajax=function(a){var j=
d.extend({},a||{});for(l in d.ajaxSettings)void 0===j[l]&&(j[l]=d.ajaxSettings[l]);h(j);j.crossDomain||(j.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(j.url)&&RegExp.$2!=window.location.host);var f=j.dataType,a=/=\?/.test(j.url);if("jsonp"==f||a)return a||(j.url=(j.url+"&callback=?").replace(/[&?]{1,2}/,"?")),d.ajaxJSONP(j);j.url||(j.url=window.location.toString());n(j);var a=j.accepts[f],o={},k=/^([\w-]+:)\/\//.test(j.url)?RegExp.$1:window.location.protocol,r=d.ajaxSettings.xhr(),m;j.crossDomain||
(o["X-Requested-With"]="XMLHttpRequest");a&&(o.Accept=a,-1<a.indexOf(",")&&(a=a.split(",",2)[0]),r.overrideMimeType&&r.overrideMimeType(a));if(j.contentType||j.data&&"GET"!=j.type.toUpperCase())o["Content-Type"]=j.contentType||"application/x-www-form-urlencoded";j.headers=d.extend(o,j.headers||{});r.onreadystatechange=function(){if(r.readyState==4){clearTimeout(m);var a,c=false;if(r.status>=200&&r.status<300||r.status==304||r.status==0&&k=="file:"){f=f||g(r.getResponseHeader("content-type"));a=r.responseText;
try{f=="script"?(0,eval)(a):f=="xml"?a=r.responseXML:f=="json"&&(a=A.test(a)?null:JSON.parse(a))}catch(d){c=d}c?i(c,"parsererror",r,j):b(a,r,j)}else i(null,"error",r,j)}};r.open(j.type,j.url,"async"in j?j.async:!0);for(q in j.headers)r.setRequestHeader(q,j.headers[q]);if(!1===e(r,j))return r.abort(),!1;0<j.timeout&&(m=setTimeout(function(){r.onreadystatechange=c;r.abort();i(null,"timeout",r,j)},j.timeout));r.send(j.data?j.data:null);return r};d.get=function(a,c){return d.ajax({url:a,success:c})};
d.post=function(a,c,b,g){d.isFunction(c)&&(g=g||b,b=c,c=null);return d.ajax({type:"POST",url:a,data:c,success:b,dataType:g})};d.getJSON=function(a,c){return d.ajax({url:a,success:c,dataType:"json"})};d.fn.load=function(a,c){if(!this.length)return this;var b=this,g=a.split(/\s/),e;1<g.length&&(a=g[0],e=g[1]);d.get(a,function(a){b.html(e?d(m.createElement("div")).html(a.replace(p,"")).find(e).html():a);c&&c.call(b)});return this};var B=encodeURIComponent;d.param=function(a,c){var b=[];b.add=function(a,
c){this.push(B(a)+"="+B(c))};j(b,a,c);return b.join("&").replace("%20","+")}})(Zepto);
(function(d){d.fn.serializeArray=function(){var f=[],h;d(Array.prototype.slice.call(this.get(0).elements)).each(function(){h=d(this);var e=h.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&(!this.disabled&&"submit"!=e&&"reset"!=e&&"button"!=e&&("radio"!=e&&"checkbox"!=e||this.checked))&&f.push({name:h.attr("name"),value:h.val()})});return f};d.fn.serialize=function(){var d=[];this.serializeArray().forEach(function(h){d.push(encodeURIComponent(h.name)+"="+encodeURIComponent(h.value))});return d.join("&")};
d.fn.submit=function(f){f?this.bind("submit",f):this.length&&(f=d.Event("submit"),this.eq(0).trigger(f),f.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(d){function f(a,c,b,d){var e=Math.abs(a-c),i=Math.abs(b-d);return e>=i?0<a-c?"Left":"Right":0<b-d?"Up":"Down"}function h(){i=null;e.last&&(e.el.trigger("longTap"),e={})}var e={},b,i;d(document).ready(function(){var a,c;d(document.body).bind("touchstart",function(g){a=Date.now();c=a-(e.last||a);e.el=d("tagName"in g.touches[0].target?g.touches[0].target:g.touches[0].target.parentNode);b&&clearTimeout(b);e.x1=g.touches[0].pageX;e.y1=g.touches[0].pageY;0<c&&250>=c&&(e.isDoubleTap=!0);e.last=
a;i=setTimeout(h,750)}).bind("touchmove",function(a){i&&clearTimeout(i);i=null;e.x2=a.touches[0].pageX;e.y2=a.touches[0].pageY}).bind("touchend",function(){i&&clearTimeout(i);i=null;e.isDoubleTap?(e.el.trigger("doubleTap"),e={}):e.x2&&30<Math.abs(e.x1-e.x2)||e.y2&&30<Math.abs(e.y1-e.y2)?(e.el.trigger("swipe")&&e.el.trigger("swipe"+f(e.x1,e.x2,e.y1,e.y2)),e={}):"last"in e&&(e.el.trigger("tap"),b=setTimeout(function(){b=null;e.el.trigger("singleTap");e={}},250))}).bind("touchcancel",function(){b&&clearTimeout(b);
i&&clearTimeout(i);i=b=null;e={}})});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(a){d.fn[a]=function(c){return this.bind(a,c)}})})(Zepto);
(function(){function d(a,c){return a instanceof c}function f(a,c){if(c)for(var b in c)a[b]=c[b];return a}function h(a,c,b){for(var g=0,d=a.length;g<d&&c.call(b,g,a[g])!==i;g++);}function e(a,c){if(a.indexOf)return-1<a.indexOf(c);for(var b=0,g=a.length;b<g;b++)if(a[b]==c)return!0;return!1}function b(a,c,b){function g(){}b||(b=c,c=a,a={});g.prototype=a.prototype;c.prototype=new g;if(b)for(var d in b)c.prototype[d]=b[d];return c}var i=!1,a="~#?@:<>+/^".split(""),c="#?@:+<".split(""),g,n=b(function(a,
c,b){this.head=a;this.tail={};this.tailIsValue=!("object"==typeof c&&!d(c,Array));this.params=f({},b);this.update(c)},{get:function(a){if(!this.tailIsValue&&this.tail.hasOwnProperty(a))return this.tail[a];if(this.params.hasOwnProperty(a))return this.params[a];if(this.head)return this.head.get(a)},set:function(a,c){if(this.tailIsValue)throw"Cannot get property on value type";this.tail[a]=c},update:function(a){if(void 0!==a)if(d(a,n))(this.tailIsValue=a.tailIsValue)?this.tail=a.tail:(this.tailIsValue&&
(this.tail={},this.tailIsValue=!1),f(this.tail,a.tail)),f(this.params,a.params);else if("object"==typeof a&&!d(a,Array)){this.tailIsValue&&(this.tail={},this.tailIsValue=!1);for(var c in a)this.set(c,a[c])}else this.tailIsValue=!0,this.tail=a}}),j=b(function(a){d(a,Array)&&(a=a.join("."));this.path=0==a.indexOf(".")?["."].concat(a.slice(1).split(".")):a.split(".")},{resolve:function(a,c){var b=new n(a,c,void 0);c?d(c,Array)?b=[].concat(c):h(this.path,function(a,c){if(c)if("."==c){if(b.tailIsValue)return b=
b.tail,i;b.parent=void 0}else{var g=b.get(c);if(void 0!==g)b=new n(b,g,void 0),b.tailIsValue&&(b=b.tail);else return b=void 0,i}else return b=b.tail,i},this):b=void 0;return b}}),o=b(function(a,c){this.tail=c;this.head=a},{getBlock:function(a){var c=this.tail.getBlock(a);if(c)return c;if(this.head)return this.head.getBlock(a)}}),k=b(function(a){this.blocks=a||{}},{render:function(){throw"Abstract";},getBlock:function(a){if(this.hasBlock(a))return this.blocks[a].asBlock()},setBlock:function(a,c){this.blocks[a]=
c},hasBlock:function(a){return void 0!==this.blocks[a]},asBlock:function(){return this}}),m=b(k,function(a,c){k.call(this,a,c);this.nodes=[].concat(c||[])},{each:function(a,c){h(this.nodes,a,c||this)},add:function(a){this.nodes[this.nodes.length]=a},last:function(){return this.nodes[this.nodes.length-1]},prepareModel:function(a,c,b){return new n(c,b,void 0)},render:function(a,c,b){var a=new o(a,this),b=this.prepareModel(a,c,b),g=[];void 0!==b&&this.each(function(d,e){g[g.length]=e.render(a,c,b)});
return g.join("")}}),l=b(k,function(a,c){k.call(this,c);a=a||"";this.buffer=[a];this.value=a},{write:function(a){if(this.buffer)this.buffer.push(a);else throw"TextNode buffer is closed";},close:function(){this.buffer&&(this.value=this.buffer.join(""),this.buffer=void 0)},render:function(){this.close();return this.value}}),q=b(k,function(a,c,b){k.call(this,c);this.context=new j(a);this.filters=[].concat(b||[])},{render:function(a,c,b){var a=new o(a,this),e=b,i="",b=this.context.resolve(c,b);void 0!==
b&&(i=d(b,k)?b.render(a,c,e):d(b,j)?b.resolve(c,e):d(b,n)?b.tail:b.toString(),this.filters.length?h(this.filters,function(a,c){g.filters[c]&&(i=g.filters[c](i))}):i=g.escapeHTML(i));return i}}),p=b(k,function(a,c,b,g,d){k.call(this,g);this.bodies={};d?f(this.bodies,d):this.startBody("block");this.params=f({},b);this.context=a?new j(a):void 0;this.scope=c?new j(c):void 0},{allowIter:!0,startBody:function(a){return this.currentBody=this.bodies[a]=new m},endBody:function(){this.currentBody=void 0},prepareModel:function(a,
c,b){var g={},d;if(this.params)for(d in this.params)g[d]=this.params[d].render(a,c,c);a=new n(c,b,g);a.update(b);return a},renderBody:function(a,c,b,g){var e=[],i=this.bodies[a],b=new n(b,g,this.params);this.scope?g=this.scope.resolve(b,g):this.context&&"string"!=typeof this.context&&(g=this.context.resolve(b,g));if(i)if(c=new o(c,i),this.allowIter&&d(g,Array)){var j=g.length;"else"==a&&1>j?e.push(i.render(c,b,void 0)):h(g,function(a,g){g=this.prepareModel(c,b,g);f(g.params,{"@idx":a,"@sep":a!=j-
1});e.push(i.render(c,b,g))},this)}else g=this.prepareModel(c,b,g),e.push(i.render(c,b,g));return e.join("")},chooseBodyName:function(a,c){var b=this.context.resolve(a,c);d(b,Array)&&1>b.length&&(b=!1);return b?"block":"else"},render:function(a,c,b){a=new o(a,this);c=new n(c,void 0,this.params);return this.renderBody(this.chooseBodyName(c,b),a,c,b)}}),t=b(p,function(){p.apply(this,arguments)},{operator:"?",allowIter:!1,prepareModel:function(a,c){return new n(c,c,this.params)}});b(t,function(){t.apply(this,
arguments)},{prepareModel:function(a,c,b){return this.context.resolve(c,b)?"else":"block"}});var s=b(p,function(a,c,b,g,d){p.call(this,void 0,c,b,g,d);this.context=a},{render:function(a,c,b){a=new o(a,this);c=new n(this.params,c);return g.helpers[this.context](a,c,b)}}),u=b(m,function(){m.apply(this,arguments)},{prepareModel:function(a,c,b){if(void 0!==b.get("@idx"))return b.get("@idx").toString()}}),y=b(m,function(){m.apply(this,arguments)},{prepareModel:function(a,c,b){if(b.get("@sep"))return m.prototype.prepareModel.apply(this,
arguments)}}),A=b(k,function(a,c){k.call(this,c);this.code=a;this.character=this.characters[a]},{characters:{n:"\n",r:"\r",s:" ",lb:"{",rb:"}"},render:function(){return this.character}}),B=b(k,function(a,c,b){k.call(this,b);this.include=a;this.scope=c?new j(c):void 0},{render:function(a,c,b){this.scope&&(b=this.scope.resolve(c,b));a=new o(a,this);name=this.include;d(this.include,m)&&(name=this.include.render(a,c,b));return g.load(name).render(a,c,b)}}),E=b(m,function(a,c,b){m.call(this,c,b);this.name=
a},{render:function(a,c,b){return(block=a.getBlock(this.name))?block.render(a,c,b):m.prototype.render.apply(this,arguments)}}),H=b(m,function(a,c,b){m.call(this,c,b);this.name=a},{asBlock:function(){return new m(null,this.nodes)},render:function(){return""}}),z=b(function(){},{parse:function(b){for(var b=b.replace(/(\{![\s\S]+?!\})|(^\s+)|(\s+$)/g,""),i=[new m],j=0,f=0,n,o,k,x,z,J,F,C=b;o=RegExp('(\\{[\\~\\#\\?\\@\\:\\<\\>\\+\\/\\^]?([a-zA-Z0-9_\\$\\.]+|"[^"]+")(\\:[a-zA-Z0-9\\$\\.]+)?(\\|[a-z]+)*?( \\w+\\=(("[^"]*?")|([\\w\\.]+)))*?\\/?\\})',
"g").exec(C);){b=!1;n=o.index;o=n+o[0].length;f!=n&&(f=C.slice(0,n))&&i[j].add(new l(f));f=o;k=void 0;n=C.slice(n+1,o-1);x=n.charAt(0);n=n.split(" ");if(e(a,x)){if(o=n[0].slice(1).split(":"),z=1<o.length?o[1]:void 0,o=o[0],F=n[n.length-1],(J="/"==o.slice(-1))?o=o.slice(0,-1):z&&"/"==z.slice(-1)?(z=z.slice(0,-1),J=!0):F&&"/"==F.slice(-1)&&(n[n.length-1]=F.slice(0,-1),J=!0),"~"==x?k=new A(o):"#"==x?k=g.helpers.hasOwnProperty(o)?new s(o,z,void 0):new p(o,z,void 0):"?"==x?k=new t(o,z,void 0):"@"==x?(name=
n[0].slice(1),"idx"==name?k=new u:"sep"==name&&(k=new y)):">"==x?('"'==o.charAt(0)&&(o=this.parse(o.replace(/^"|"$/g,""))),k=new B(o,z)):k="+"==x?new E(o):"<"==x?new H(o):new l("UNDEFINED:"+n.join(" ")),h(n.slice(1),function(a,c){var c=c.split("="),b=c[0],g=c.slice(1).join("="),g=g.charAt(0)!='"'?new q(g):this.parse(g.replace(/(^")|("$)|("\/$)/g,""));k.params[b]=g},this),!J)e(c,x)?(b=!0,d(k,m)?(d(k,H)&&i[j].setBlock(k.name,k),i[j].add(k),j+=1,i[j]=k):d(k,p)?(i[j].add(k),i[++j]=k.currentBody):(n=i[j-
1].last(),n.endBody(),i[j]=n.startBody(o))):"/"==x&&(b=!0,0<j&&i.splice(j--,1))}else n=n[0].split("|"),o=n.splice(1),n=n[0],k=new q(n,null,o);k&&!b&&i[j].add(k);C=C.slice(f)}(f=C)&&i[j].add(new l(f));return i[0]}}),F=b(function(a,c,b){this.name=a;this.rootNode=c;this.srcFile=b},{render:function(a,c,b){return this.rootNode.render(c,b,a)}}),C=b(function(){this.parser=new z;this.templates={};this.helpers={};this.filters={h:this.escapeHTML,j:this.escapeJS,u:this.escapeURI,uc:this.escapeURIComponent};
var a=null;this.getContextPath=function(){a||this.setContextPath(window.location.toString());return a};this.setContextPath=function(c){a=c.split("#")[0].split("?")[0].replace(/\/[^\/]*?\..[^\/]*?$/,"")}},{escapeHTML:function(a){a+="";return/[&<>\"]/.test(a)?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&squot;"):a},escapeJS:function(a){return(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\r/g,"\\r").replace(/\u2028/g,
"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\t/g,"\\t")},escapeURI:function(a){return encodeURI(a)},escapeURIComponent:function(a){return encodeURIComponent(a)},register:function(a,c,b){this.templates[a]=new F(a,c,b)},compile:function(a,c,b){a=this.parser.parse(a);this.register(c,a,b);return a},load:function(a,c){void 0===c&&(c=a);if(this.templates.hasOwnProperty(a))return this.templates[c].rootNode;0==a.indexOf("~")&&(a=a.replace("~",this.getContextPath()));
var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);if(200===b.status||0===b.status)return this.compile(b.responseText,c,a)},render:function(a,c,b){var g=null,d=null;try{g=this.templates[a].render(c)}catch(e){d=e}b(d,g)}});window.xdust=g=new C})();
(function(){var d=Math,f=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"";/android/gi.test(navigator.appVersion);var h=/iphone|ipad/gi.test(navigator.appVersion),e=/playbook/gi.test(navigator.appVersion),b=/hp-tablet/gi.test(navigator.appVersion),i="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!b,c=f+"Transform"in document.documentElement.style,g=h||e,n=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),j=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,o="onorientationchange"in window?"orientationchange":"resize",k=a?"touchstart":"mousedown",
m=a?"touchmove":"mousemove",l=a?"touchend":"mouseup",q=a?"touchcancel":"mouseup",p="translate"+(i?"3d(":"("),t=i?",0)":")",h=function(b,d){var e=document,i;this.wrapper="object"==typeof b?b:e.getElementById(b);this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,
onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in d)this.options[i]=d[i];this.x=this.options.x;this.y=this.options.y;this.options.useTransform=c?this.options.useTransform:!1;this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.options.useTransition=g&&this.options.useTransition;this.scroller.style[f+"TransitionProperty"]=this.options.useTransform?
"-"+f.toLowerCase()+"-transform":"top left";this.scroller.style[f+"TransitionDuration"]="0";this.scroller.style[f+"TransformOrigin"]="0 0";this.options.useTransition&&(this.scroller.style[f+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");this.options.useTransform?this.scroller.style[f+"Transform"]=p+this.x+"px,"+this.y+"px"+t:this.scroller.style.cssText+=";position:absolute;top:"+this.y+"px;left:"+this.x+"px";this.refresh();this._bind(o,window);this._bind(k);a||this._bind("mouseout",
this.wrapper)};h.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(c){switch(c.type){case k:if(!a&&0!==c.button)break;this._start(c);break;case m:this._move(c);break;case l:case q:this._end(c);break;case o:this._resize();break;case "mouseout":this._mouseout(c);break;case "webkitTransitionEnd":this._transitionEnd(c)}},_resize:function(){this.refresh()},_pos:function(a,c){a=this.hScroll?a:0;c=this.vScroll?c:0;this.options.useTransform?this.scroller.style[f+"Transform"]=p+a+"px,"+c+
"px"+t+" scale("+this.scale+")":(a>>=0,c>>=0,this.scroller.style.left=a+"px",this.scroller.style.top=c+"px");this.x=a;this.y=c},_start:function(c){var b=a?c.touches[0]:c,g,d;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,c);this.options.useTransition&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum&&(this.options.useTransform?(g=getComputedStyle(this.scroller,
null)[f+"Transform"].replace(/[^0-9-.,]/g,"").split(","),d=1*g[4],g=1*g[5]):(d=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),g=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),d!=this.x||g!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):j(this.aniTime),this.steps=[],this._pos(d,g);this.startX=this.x;this.startY=this.y;this.pointX=b.pageX;this.pointY=b.pageY;this.startTime=c.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,
c);this._bind(m);this._bind(l);this._bind(q)}},_move:function(c){var b=a?c.touches[0]:c,g=b.pageX-this.pointX,e=b.pageY-this.pointY,i=this.x+g,j=this.y+e,f=c.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,c);this.pointX=b.pageX;this.pointY=b.pageY;if(0<i||i<this.maxScrollX)i=this.options.bounce?this.x+g/2:0<=i||0<=this.maxScrollX?0:this.maxScrollX;if(0<j||j<this.maxScrollY)j=this.options.bounce?this.y+e/2:0<=j||0<=this.maxScrollY?0:this.maxScrollY;
this.distX+=g;this.distY+=e;this.absDistX=d.abs(this.distX);this.absDistY=d.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(j=this.y,e=0):this.absDistY>this.absDistX+5&&(i=this.x,g=0)),this.moved=!0,this._pos(i,j),this.dirX=0<g?-1:0>g?1:0,this.dirY=0<e?-1:0>e?1:0,300<f-this.startTime&&(this.startTime=f,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,c))},_end:function(c){if(!(a&&0!=
c.touches.length)){var b=a?c.changedTouches[0]:c,g,e,i={dist:0,time:0},j={dist:0,time:0},f=(c.timeStamp||Date.now())-this.startTime;g=this.x;e=this.y;this._unbind(m);this._unbind(l);this._unbind(q);this.options.onBeforeScrollEnd&&this.options.onBeforeScrollEnd.call(this,c);if(this.moved){if(300>f&&this.options.momentum){i=g?this._momentum(g-this.startX,f,-this.x,this.scrollerW-this.wrapperW+this.x,this.options.bounce?this.wrapperW:0):i;j=e?this._momentum(e-this.startY,f,-this.y,0>this.maxScrollY?
this.scrollerH-this.wrapperH+this.y:0,this.options.bounce?this.wrapperH:0):j;g=this.x+i.dist;e=this.y+j.dist;if(0<this.x&&0<g||this.x<this.maxScrollX&&g<this.maxScrollX)i={dist:0,time:0};if(0<this.y&&0<e||this.y<this.maxScrollY&&e<this.maxScrollY)j={dist:0,time:0}}i.dist||j.dist?(b=d.max(d.max(i.time,j.time),10),this.scrollTo(g>>0,e>>0,b)):this._resetPos(200)}else{if(a){for(g=b.target;1!=g.nodeType;)g=g.parentNode;"SELECT"!=g.tagName&&("INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName)&&(e=document.createEvent("MouseEvents"),
e.initMouseEvent("click",!0,!0,c.view,1,b.screenX,b.screenY,b.clientX,b.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),e._fake=!0,g.dispatchEvent(e))}this._resetPos(200)}this.options.onTouchEnd&&this.options.onTouchEnd.call(this,c)}},_resetPos:function(a){var c=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,b=0<=this.y||0<this.maxScrollY?0:this.y<this.maxScrollY?this.maxScrollY:this.y;c==this.x&&b==this.y?this.moved&&(this.options.onScrollEnd&&this.options.onScrollEnd.call(this),
this.moved=!1):this.scrollTo(c,b,a||0)},_mouseout:function(a){var c=a.relatedTarget;if(c)for(;c=c.parentNode;)if(c==this.wrapper)return;this._end(a)},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var a=this,c=a.x,b=a.y,g=Date.now(),e,i,j;a.animating||(a.steps.length?(e=a.steps.shift(),e.x==c&&e.y==b&&(e.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)?(a._transitionTime(e.time),a._pos(e.x,e.y),a.animating=
!1,e.time?a._bind("webkitTransitionEnd"):a._resetPos(0)):(j=function(){var f=Date.now(),h;if(f>=g+e.time){a._pos(e.x,e.y);a.animating=false;a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a);a._startAni()}else{f=(f-g)/e.time-1;i=d.sqrt(1-f*f);f=(e.x-c)*i+c;h=(e.y-b)*i+b;a._pos(f,h);if(a.animating)a.aniTime=n(j)}},j()):a._resetPos(400))},_transitionTime:function(a){this.scroller.style[f+"TransitionDuration"]=a+"ms"},_momentum:function(a,c,b,g,e){var c=d.abs(a)/c,i=c*c/0.0012;0<a&&i>b?(b+=e/
(6/(6.0E-4*(i/c))),c=c*b/i,i=b):0>a&&i>g&&(g+=e/(6/(6.0E-4*(i/c))),c=c*g/i,i=g);return{dist:i*(0>a?-1:1),time:c/6.0E-4>>0}},_offset:function(a){for(var c=-a.offsetLeft,b=-a.offsetTop;a=a.offsetParent;)c-=a.offsetLeft,b-=a.offsetTop;return{left:c,top:b}},_bind:function(a,c,b){(c||this.scroller).addEventListener(a,this,!!b)},_unbind:function(a,c,b){(c||this.scroller).removeEventListener(a,this,!!b)},destroy:function(){this.scroller.style[f+"Transform"]="";this._unbind(o,window);this._unbind(k);this._unbind(m);
this._unbind(l);this._unbind(q);this._unbind("mouseout",this.wrapper);this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a;this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this.hScroll=
this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;this.scroller.style[f+"TransitionDuration"]="0";this._resetPos(200)},scrollTo:function(a,c,b,g){var d=a;this.stop();d.length||(d=[{x:a,y:c,time:b,relative:g}]);a=0;for(c=d.length;a<c;a++)d[a].relative&&(d[a].x=this.x-d[a].x,d[a].y=this.y-d[a].y),this.steps.push({x:d[a].x,
y:d[a].y,time:d[a].time||0});this._startAni()},scrollToElement:function(a,c){var b;if(a=a.nodeType?a:this.scroller.querySelector(a))b=this._offset(a),b.left+=this.wrapperOffsetLeft,b.top+=this.wrapperOffsetTop,b.left=0<b.left?0:b.left<this.maxScrollX?this.maxScrollX:b.left,b.top=0<b.top?0:b.top<this.maxScrollY?this.maxScrollY:b.top,c=void 0===c?d.max(2*d.abs(b.left),2*d.abs(b.top)):c,this.scrollTo(b.left,b.top,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(m);this._unbind(l);
this._unbind(q)},enable:function(){this.enabled=!0},stop:function(){j(this.aniTime);this.steps=[];this.animating=this.moved=!1}};"undefined"!==typeof exports?exports.iScroll=h:window.iScroll=h})();
var LZ77=function(d){var d=d||{},f=d.referenceIntBase||96,h=32+f-1,e=Math.pow(f,2)-1,b=d.minStringLength||5,i=Math.pow(f,1)-1+b,a=d.defaultWindowLength||144,c=e+b,g=function(a,c){if(0<=a&&a<Math.pow(f,c)-1){for(var b="";0<a;)b=String.fromCharCode(a%f+32)+b,a=Math.floor(a/f);for(var g=c-b.length,d=0;d<g;d++)b=String.fromCharCode(32)+b;return b}throw"Reference int out of range: "+a+" (width = "+c+")";},n=function(a,c){for(var b=0,g=0;g<c;g++){var b=b*f,d=a.charCodeAt(g);if(32<=d&&d<=h)b+=d-32;else throw"Invalid char code in reference int: "+
d;}return b};this.compress=function(d,f){f=f||a;if(f>c)throw"Window length too large";for(var n="",h=0,l=d.length-b;h<l;){for(var q=Math.max(h-f,0),p=b,t=!1,s=e,u=0,y=null;q+p<h;)d.substr(q,p)==d.substr(h,p)&&p<i?(p++,t=!0):(p-=1,t&&p>u&&(s=h-q-p,u=p),p=b,q++,t=!1);u?(y="`"+g(s,2)+g(u-b,1),h+=u):(y="`"!=d.charAt(h)?d.charAt(h):"``",h++);n+=y}return n+d.slice(h).replace(/`/g,"``")};this.decompress=function(a){for(var c="",g=0;g<a.length;){var d=a.charAt(g);if("`"!=d)c+=d,g++;else if("`"!=a.charAt(g+
1)){var d=n(a.substr(g+1,2),2),e;e=a.charAt(g+3);e=n(e,1)+b;c+=c.substr(c.length-d-e,e);g+=b-1}else c+="`",g+=2}return c}};
(function(d,f){var h=0;d.$=f.noConflict?f.noConflict():f;d.resolve=function(d,b){if(!d)return null;for(var d=d.split("."),i=window,a=window,c=-1,g;g=d[++c];){a=a[g];if(!a)if(b)a=i[g]={};else return null;i=a}return a};d.extend=function(e,b,i){function a(){}"object"==typeof e?(i=e,e=Object,b=function(){}):"object"==typeof b&&(i=b,b=e,e=Object);a.prototype=e.prototype;b.prototype=new a;b.prototype.constructor=b;if(i)for(var c in i)b.prototype[c]=i[c];b.extend=function(a,c){if(typeof a=="object"){c=a;
a=function(){b.apply(this,arguments)}}d.extend(b,a,c);return a};return b};d.log=function(){window.console?console.log.apply(console,arguments):alert([].join.call(arguments," "))};d.uuid=function(){return h++};d.delay=function(d,b,i){return setTimeout(function(){d.call(b)},i||0)};d.clone=function(e,b){return e?e instanceof Array?e.slice(0):e instanceof Date?new Date(e.getTime()):"object"==typeof e?d.merge(b,{},e):e.valueOf():e};d.merge=function(e,b){var i=-1,a=[].slice.call(arguments,2),c,g;"object"==
typeof e&&(a.unshift(b),b=e,e=!1);for(;c=a[++i];)for(g in c)c.hasOwnProperty(g)&&(b[g]=e?d.clone(arg[g]):c[g]);return b};f.fn.dataAttrs=function(){for(var d={},b=this[0].attributes,i=-1,a;a=b[++i];)0==a.name.indexOf("data-")&&(d[a.name.slice(5)]=a.value);return d};f.proxy||(f.proxy=function(d,b){return function(){d.apply(b,arguments)}})})(window.Lavaca=window.Lavaca||{},window.jQuery||window.Zepto||window.jMiny);
(function(d){d.indexOf=function(d,h){if(d){if(d.indexOf)return d.indexOf(h);for(var e=0,b=d.length;e<b;e++)if(d[e]===h)return e}return-1};d.contains=function(f,h){return-1<d.indexOf(f,h)};d.remove=function(f,h){var e=d.indexOf(f,h);-1<e&&f.splice(e,1);return e};d.pushIfNotExists=function(f,h){var e=d.indexOf(f,h);-1==e&&(f[e=f.length]=h);return e}})(Lavaca.resolve("Lavaca.util.ArrayUtils",!0));
(function(d){function f(a){return parseInt(a,10)}function h(a,c){for(var a=a.toLowerCase(),g=-1,d;d=c[++g];)if(a==d.toLowerCase()||a==b(d).toLowerCase())return g-1;throw'Invalid code "'+d+'"';}function e(a,c,b){for(var d=0>a?"-":"",b=b||"0",a=Math.abs(a).toString();0<c-a.length;)a=b+a;return d+a}function b(a){Lavaca.util.Translation&&(result=Lavaca.util.Translation.get(a));return result?result:a}function i(a){for(var c=[],b="",d=-1,e,i;i=a.charAt(++d);)if(e=b.charAt(0),e==i||'"'==e||"'"==e){if(b+=
i,'"'==e&&'"'==i||"'"==e&&"'"==i)c.push(b),b=""}else b&&c.push(b),b=i;b&&c.push(b);return c}d.timeOfDayDesignatorAbbr=["A","P"];d.timeOfDayDesignator=["AM","PM"];d.daysOfWeekAbbr="Sun Mon Tue Wed Thu Fri Sat".split(" ");d.daysOfWeek="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");d.monthsAbbr="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");d.months="January February March April May June July August September October November December".split(" ");d.fn={d:{exp:"\\d{1,2}",
i:function(a,c){c.date=f(a)},o:function(a,c){return(c?a.getUTCDate():a.getDate()).toString()}},dd:{exp:"\\d{2}",i:function(a,c){c.date=f(a)},o:function(a,c){return e(d.fn.d.o(a,c),2)}},ddd:{exp:"[a-z]{3}",i:function(){},o:function(a,c){return b(d.daysOfWeekAbbr[c?a.getUTCDay():a.getDay()])}},dddd:{exp:"[a-z]+",i:function(){},o:function(a,c){return b(d.daysOfWeek[c?a.getUTCDay():a.getDay()])}},f:{exp:"\\d",i:function(a,c){c.ms=100*f(a)},o:function(a,c,b){b=b||100;return e(Math.floor((c?a.getUTCMilliseconds():
a.getMilliseconds())/b),3-b.toString().length)}},ff:{exp:"\\d{2}",i:function(a,c){c.ms=10*f(a)},o:function(a,c){return e(d.fn.f.o(a,c,10),2)}},fff:{exp:"\\d{3}",i:function(a,c){c.ms=f(a,10)},o:function(a,c){return e(d.fn.f.o(a,c,1),3)}},h:{exp:"1?\\d",i:function(a,c,b){a=f(a)-1;b=0==(b.t||b.tt||"A").indexOf("A")?0:12;c.hour=a+b},o:function(a,c){return((c?a.getUTCHours():a.getHours())%12+1).toString()}},hh:{exp:"[0-1]\\d",i:function(a,c,b){d.fn.h.i(a,c,b)},o:function(a,c){return e(d.fn.h.o(a,c),2)}},
H:{exp:"[0-2]?\\d",i:function(a,c){c.hour=f(a)},o:function(a,c){return(c?a.getUTCHours():a.getHours()).toString()}},HH:{exp:"[0-2]\\d",i:function(a,c){c.hour=f(a)},o:function(a,c){return e(d.fn.H.o(a,c),2)}},m:{exp:"[1-5]?\\d",i:function(a,c){c.minute=f(a)},o:function(a,c){return(c?a.getUTCMinutes():a.getMinutes()).toString()}},mm:{exp:"[0-5]\\d",i:function(a,c,b){d.fn.m.i(a,c,b)},o:function(a,c){return e(d.fn.m.o(a,c),2)}},M:{exp:"1?\\d",i:function(a,c){c.month=f(a)-1},o:function(a,c){return((c?
a.getUTCMonth():a.getMonth())+1).toString()}},MM:{exp:"[0-1]\\d",i:function(a,c,b){d.fn.M.i(a,c,b)},o:function(a,c){return e(d.fn.M.o(a,c),2)}},MMM:{exp:"[a-z]{3}",i:function(a,c){c.month=h(a,d.monthsAbbr)},o:function(a,c){return b(d.monthsAbbr[c?a.getUTCMonth():a.getMonth()])}},MMMM:{exp:"[a-z]+",i:function(a,c){c.month=h(a,d.months)},o:function(a,c){return b(d.months[c?a.getUTCMonth():a.getMonth()])}},s:{exp:"[1-5]?\\d",i:function(a,c){c.second=f(a)},o:function(a,c){return(c?a.getUTCSeconds():a.getSeconds()).toString()}},
ss:{exp:"[0-5]\\d",i:function(a,c,b){d.fn.s.i(a,c,b)},o:function(a,c){return e(d.fn.s.o(a,c),2)}},t:{exp:"[a-z]",i:function(){},o:function(a,c){return b(d.timeOfDayDesignatorAbbr[Math.floor((c?a.getUTCHours():a.getHours())/12)])}},tt:{exp:"[a-z]+",i:function(){},o:function(a,c){return b(d.timeOfDayDesignator[Math.floor((c?a.getUTCHours():a.getHours())/12)])}},y:{exp:"\\d?\\d",i:function(a,c){c.year=(new Date).getFullYear()%100+f(a)},o:function(a,c){return((c?a.getUTCFullYear():a.getFullYear())%100).toString()}},
yy:{exp:"\\d{2}",i:function(a,c,b){d.fn.y.i(a,c,b)},o:function(a,c){return e(d.fn.y.o(a,c),2)}},yyy:{exp:"\\d*\\d{3}",i:function(a,c){c.year=f(a)},o:function(a,c){return e(c?a.getUTCFullYear():a.getFullYear(),3)}},yyyy:{exp:"\\d*\\d{4}",i:function(a,c,b){d.fn.yyy.i(a,c,b)},o:function(a,c){return e(c?a.getUTCFullYear():a.getFullYear(),4)}},z:{exp:"[-+]?1?\\d",i:function(a,c){c.offset=60*f(a)},o:function(a,c){var b=a.getTimezoneOffset(),d=Math.floor(Math.abs(b/60));return(0>b?"-":"+")+e(d,c)}},zz:{exp:"[-+]?[0-1]\\d",
i:function(a,c,b){d.fn.z.i(a,c,b)},o:function(a){return d.fn.z.o(a,2)}},zzz:{exp:"[-+]?[0-1]\\d:\\d{2}",i:function(a,c){var b=a.split(":");c.offset=60*f(b[0])+f(b[1])},o:function(a){var a=a.getTimezoneOffset(),c=a%60;return(0>a?"-":"+")+e((a-c)/60,2)+":"+e(Math.abs(c),2)}}};d.parse=function(a,c){for(var b=i(c),f,j=["^"],h=-1,k;k=b[++h];)(f=d.fn[k])?j.push("(",f.exp,")"):j.push("(",k.replace(/(^")|(^')|('$)|("$)/g,"").replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),")");j.push("$");f=RegExp(j.join(""));
j={year:0,month:0,date:1,hour:0,minute:0,second:0,ms:0,offset:0};h={};k=-1;var m;if(f.test(a))for(f=f.exec(a);m=b[++k];)h[m]=f[k+1];for(m in h)(b=d.fn[m])&&b.i(h[m],j,h);return new Date(d.monthsAbbr[j.month]+" "+e(j.date,2)+" "+e(j.year,4)+" "+e(j.hour,2)+":"+e(j.minute,2)+":"+e(j.second,2)+(0<j.ms?"."+e(j.ms,3):"")+(0<=j.offset?"+":"-")+e(Math.floor(Math.abs(j.offset/60)),2)+e(Math.abs(j.offset%60),2))};d.stringify=function(a,c,b){for(var c=i(c),e=-1,j=[],f,h;f=c[++e];)(h=d.fn[f])?j.push(h.o(a,b)):
j.push(f.replace(/(^")|(^')|('$)|("$)/g,""));return j.join("")}})(Lavaca.resolve("Lavaca.util.DateUtils",!0));(function(d){function f(d){var e,b,i;for(e in d){if(d.hasOwnProperty(e)&&(b=d[e]))if("function"==typeof b.dispose)b.dispose();else if(b instanceof Array)for(i=b.length-1;-1<i;i--)f(b[i]);delete d[e]}}d.Disposable=Lavaca.extend({dispose:function(){f(this)}})})(Lavaca.resolve("Lavaca.util",!0));
(function(d,f){d.Cache=f.extend({get:function(d,e){var b=this["@"+d];void 0===b&&void 0!==e&&(b=this["@"+d]=e);return void 0===b?null:b},set:function(d,e){this["@"+d]=e},add:function(d){var e=Lavaca.uuid();this.set(e,d);return e},remove:function(d){delete this["@"+d]},each:function(d,e){for(var b in this)this.hasOwnProperty(b)&&0==b.indexOf("@")&&d.call(e||this,b.slice(1),this[b])},toObject:function(){var d={};this.each(function(e,b){d[e]=b});return d},toJSON:function(){return JSON.stringify(this.toObject())}})})(Lavaca.util,
Lavaca.util.Disposable);
(function(d,f,h){d.Map=h.extend(function(d,b,i){h.call(this);this.hasLoaded=!1;this.name=d;(d=b)&&0!=d.indexOf("http")&&(d="/"==d.charAt(0)?location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+(0==d.indexOf("/")?d:"/"+d):location.toString().split("#")[0].split("?")[0].replace(/\w+\.\w+$/,"")+d);this.src=d;this.code=i;this.cache=new Lavaca.util.Cache},{is:function(d){return this.name==d},get:function(d){this.hasLoaded||(this.code?this.add(this.code):this.src&&this.load(this.src),
this.hasLoaded=!0);return this.cache.get(d)},add:function(d){for(var b in d)this.cache.set(b,d[b])},process:function(d){this.add("string"==typeof d?JSON.parse(d):d)},load:function(d){var b=this;Lavaca.net.Connectivity.ajax({async:!1,url:d,success:function(d){b.process(d)}})}});d.Map.setDefault=function(d,b){var i=b;"string"==typeof i&&(i=d.get(b));d.set("default",i)};d.Map.get=function(d,b,i,a){i||(i=b,b=a);return b&&(d=d.get(b))?d.get(i):null};d.Map.init=function(e,b,i,a){f(a||document.documentElement).find('script[type="'+
b+'"]').each(function(){var a=f(this),b=a.attr("data-src"),h=a.attr("data-name"),j=null!==a.attr("data-default"),a=a.text(),b=i(h,b,a);e.set(b.name,b);j&&d.Map.setDefault(e,h)})};d.Map.dispose=function(d){d.dispose()}})(Lavaca.util,Lavaca.$,Lavaca.util.Disposable);
(function(d,f,h){function e(b,a,c){c&&(c=JSON.parse(c));return new d.Config(b,a,c)}var b=new d.Cache;d.Config=h.extend({});d.Config.setDefault=function(d){h.setDefault(b,d)};d.Config.get=function(d,a){return h.get(b,d,a,"default")};d.Config.init=function(d){h.init(b,"text/x-config",e,d)};d.Config.dispose=function(){h.dispose(b)}})(Lavaca.util,Lavaca.$,Lavaca.util.Map);
(function(d){d.Promise=Lavaca.extend(function(d){this.thisp=d;this.resolvedQueue=[];this.rejectedQueue=[]},{succeeded:!1,failed:!1,success:function(d){d&&(this.succeeded?d.apply(this.thisp,this.resolveArgs):this.resolvedQueue.push(d));return this},error:function(d){d&&(this.failed?d.apply(this.thisp,this.rejectArgs):this.rejectedQueue.push(d));return this},always:function(d){return this.then(d,d)},then:function(d,h){return this.success(d).error(h)},resolve:function(){if(!this.succeeded&&!this.failed){this.succeeded=
!0;this.resolveArgs=[].slice.call(arguments,0);for(var d=-1,h;h=this.resolvedQueue[++d];)h.apply(this.thisp,this.resolveArgs)}return this},reject:function(){if(!this.succeeded&&!this.failed){this.failed=!0;this.rejectArgs=[].slice.call(arguments,0);for(var d=-1,h;h=this.rejectedQueue[++d];)h.apply(this.thisp,this.rejectArgs)}return this},when:function(){for(var d=this,h=[],e=-1,b=arguments.length,i;i=arguments[++e];)(function(a){i.success(function(c){h[a]=c;1>--b&&d.resolve.apply(d,h)}).error(function(){d.reject.apply(d,
arguments)})})(e);i=null;return this},resolver:function(){var d=this;return function(){d.resolve.apply(d,arguments)}},rejector:function(){var d=this;return function(){d.reject.apply(d,arguments)}}});d.Promise.when=function(f){var h=f instanceof d.Promise,e=new d.Promise(h?window:f),h=[].slice.call(arguments,h?0:1);return e.when.apply(e,h)}})(Lavaca.resolve("Lavaca.util",!0));
(function(d,f){function h(b){return b}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};d.format=function(b){var d,a=h,c,g;arguments[1]instanceof Array?(d=arguments[1],a=arguments[2]||h):d=[].slice.call(arguments,1);c=0;for(g=d.length;c<g;c++)b=b.split("{"+c+"}").join(a(d[c]+""));return b};d.escapeHTML=function(b){var b=""+b,d;for(d in e)b=b.split(d).join(e[d]);return b};d.compress=function(b){"string"!=typeof b&&(b=JSON.stringify(b));return(new f).compress(b)};d.decompress=function(b){return(new f).decompress(b)}})(Lavaca.resolve("Lavaca.util.StringUtils",
!0),window.LZ77);
(function(d,f){function h(b,i,a){a&&(a=JSON.parse(a));b=new d.Translation(b,i,a);e.get(b.language)||e.set(b.language,b);return b}var e=new d.Cache;d.Translation=f.extend(function(b,d,a){f.apply(this,arguments);var c=b=b.toLowerCase().split("_");this.language=c[0];this.locale=(this.country=c[1]||"")?this.language+"_"+this.country:this.language},{is:function(b,d){return b==this.language&&(!d||!this.country||d==this.country)}});d.Translation.setDefault=function(b){e.remove("default");f.setDefault(e,
d.Translation.forLocale(b))};d.Translation.forLocale=function(b){b=(b||"default").toLowerCase();return e.get(b)||e.get(b.split("_")[0])||e.get("default")};d.Translation.get=function(b,e){e||(e=b,b="default");var a=d.Translation.forLocale(b),c=null;a&&(c=a.get(e));null===c&&(a=d.Translation.forLocale(b.split("_")[0]))&&(c=a.get(e));null===c&&(a=d.Translation.forLocale("default"))&&(c=a.get(e));return c};d.Translation.init=function(b,i){f.init(e,"text/x-translation",h,i);d.Translation.setDefault(b)};
d.Translation.dispose=function(){f.dispose(e)}})(Lavaca.util,Lavaca.util.Map);
(function(d,f){d.EventDispatcher=f.extend({suppressEvents:!1,on:function(d,e,b){var i=this.callbacks||(this.callbacks={}),d=i[d]||(i[d]=[]);d[d.length]={fn:e,thisp:b};return this},off:function(d,e,b){var i=this.callbacks,a,c=-1,g,f;if(d){if(i)if(e){if(a=i[d])for(i=i[d]=[];d=a[++c];)if(g=d.fn==e||d.fn.fn==e,f=b&&(d.thisp==b||d.fn.thisp==b),!g||g&&(!b||!f))i[i.length]=d}else delete i[d]}else delete this.callbacks;return this},trigger:function(d,e){if(!this.suppressEvents&&this.callbacks){var b=this.callbacks[d],
i=this.createEvent(d,e),a=-1,c;if(b)for(;c=b[++a];)c.fn.apply(c.thisp||this,[i])}return this},createEvent:function(d,e){return Lavaca.merge({},e||{},{type:d,target:e&&e.target?e.target:this,currentTarget:this})}})})(Lavaca.resolve("Lavaca.events",!0),Lavaca.util.Disposable);
(function(d){var f="screenX screenY clientX clientY pageX pageY".split(" ");d.EventPoint=Lavaca.extend(function(d){this.init(d)},{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,init:function(d){for(var e=-1,b;b=f[++e];)this[b]=d?d[b]:null}})})(Lavaca.resolve("Lavaca.events",!0));(function(d){d.EventVector=Lavaca.extend(function(d,h,e){this.length=d;this.axis=h;this.compass=e},{length:0,axis:"vertical",compass:"north"})})(Lavaca.resolve("Lavaca.events",!0));
(function(d,f,h,e){function b(a,c){s[a]=function(a){c(a)}}function i(a,c){u[a]=function(a){c(a)}}function a(a,c){a.touches&&(a=a.touches[c||0]);return new e(a)}function c(a,c){for(var b={},d=-1,g;g=p[++d];)b[g]=a[g]-c[g];return new e(b)}function g(a,c){return Math.sqrt((a.screenX-c.screenX)*(a.screenX-c.screenX)+(a.screenY-c.screenY)*(a.screenY-c.screenY))}function n(a,c){var b=a.screenX-c.screenX,d=a.screenY-c.screenY;return b*b>d*d?new h(Math.abs(b),"horizontal",0<b?"east":"west"):new h(Math.abs(d),
"vertical",0<d?"south":"north")}function j(a,c){var b=-1,d;if(null!==a&&c.changedTouches){for(;d=c.changedTouches[++b];)if(d.identifier===a)return d;return null}return c}function o(a){a.preventDefault()}function k(a){if(a){for(var c in a)"function"!=typeof a[c]&&(this[c]=a[c]);this.originalEvent=a}}var m="mousedown",l="mousemove",q="mouseup",p="screenX screenY clientX clientY pageX pageY".split(" "),t=!1,s={},u={};(function(){var a=document.createElement("div");a.setAttribute("ontouchstart","return;");
a.setAttribute("ongesturestart","return;");if(t="function"==typeof a.ontouchstart)m="touchstart",l="touchmove",q="touchend"})();(function(){f(document.body).on(l,function(a){for(var c in s)s[c](a)}).on(q,function(a){for(var c in u)u[c](a)})})();k.prototype={preventDefault:function(){this.defaultPrevented=!0;this.originalEvent&&this.originalEvent.preventDefault()},stopPropagation:function(){this.originalEvent&&this.originalEvent.stopPropagation()}};d.moveThreshold=4;d.tapholdDuration=800;d.isSupported=
function(){return t};d.bind=function(e,f,h,o,l,q){function p(a){var b=new k(a);if(a&&(b.startTime=t,b.elapsed=(new Date).getTime()-t,b.startPoint=r,b.lastPoint=G,b.currentPoint=w,b.hasMoved=I||(I=!(g(r,w)<=d.moveThreshold)),r&&w&&(b.startDelta=c(w,r),b.startDistance=g(w,r),b.startVector=n(w,r)),w&&G))b.lastDelta=c(w,G),b.lastDistance=g(w,G),b.lastVector=n(w,G);return b}"function"==typeof f&&(f={start:f,move:h,end:o},q=l);f&&"object"==typeof f&&(q=h,h=f,f=null);h&&"object"==typeof h&&(o=h.move,l=h.end,
h=h.start,q=o);var t,r,G,w,I=!1,D=!1,v;e.on("click",f,function(a){D&&a.preventDefault()}).on(m,f,function(c){var c=c.originalEvent,d=this,g=Lavaca.uuid();t=(new Date).getTime();r=G=w=a(c);I=false;c.changedTouches&&c.changedTouches.length?v=c.changedTouches[0].identifier:idenfifier=null;h&&h.call(q||d,p(c));D=D||c.defaultPrevented;b(g,function(c){var b=j(v,c);if(null!==b){w=a(b);if(o){c=p(c);c.currentTarget=d;o.call(q||d,c);D=D||c.defaultPrevented}G=w}});i(g,function(c){var b=j(v,c);if(null!==b){w=
a(b);if(l){c=p(c);c.currentTarget=d;l.call(q||d,c);D=D||c.defaultPrevented}delete s[g];delete u[g];d=null}})});e=null};f.fn.touch=function(a,c,b,g,e){d.bind(this,a,c,b,g,e);return this};f.fn.tap=function(a,c,b){"function"==typeof a&&(b=c,c=a,a=null);if(t)d.bind(this,a,o,null,function(a){!a.hasMoved&&c&&c.apply(b||this,arguments)});else this.on("click",a,function(){c.apply(b||this,arguments)});return this};f.fn.taphold=function(a,c,b,g){"function"==typeof a&&(g=b,b=c,c=a,a=null);b=b||d.tapholdDuration;
this.tap(a,function(a){a.elapsed>=b&&c&&c.apply(this,arguments)},g);return this};f.fn.swipe=function(a,c,b,g){"function"==typeof a&&(b=c,c=a,a=null);var b=b||{},e=b.minDistance||30,i=b.maxDistance||Number.MAX_VALUE,j=b.direction||"horizontal",f=b.timeLimit||1E3,h=b.cancel||null,n=b.move||null,o=b.end||null;d.bind(this,a,b.start||null,function(a){a.elapsed<=f&&n&&n.apply(g||this,arguments)},function(a){o&&o.apply(g||this,arguments);a.elapsed<=f&&(j==a.startVector.compass||j==a.startVector.axis)&&a.startVector.length>=
e&&a.startVector.length<=i?c&&c.apply(g||this,arguments):h&&h.apply(g||this,arguments)});return this}})(Lavaca.resolve("Lavaca.events.Touch",!0),Lavaca.$,Lavaca.events.EventVector,Lavaca.events.EventPoint);
(function(d,f,h){var e=!1,b=[];d.isCordova=function(){return!!h};d.register=function(d,a){function c(){window.plugins||(window.plugins={});window.plugins[d]=new a}e?c():b.push(c)};d.exec=function(b,a,c){var d=new Lavaca.util.Promise(window);h?h.exec(d.resolver(),d.rejector(),b,a,c):d.reject();return d};d.init=function(b){if(document.addEventListener)document.addEventListener("deviceready",b,!1);else f(document).on("deviceready",b)};f(document).ready(function(){for(var d=-1,a;a=b[++d];)a();e=!0;h||
(document.createEvent?(d=document.createEvent("Events"),d.initEvent("deviceready",!0,!1),document.dispatchEvent(d)):document.fireEvent&&(d=document.createEventObject(),d.eventType="deviceready",document.fireEvent("ondeviceready",d)))})})(Lavaca.resolve("Lavaca.env.Device",!0),Lavaca.$,window.Cordova||window.cordova);
(function(d,f){d.Badge=Lavaca.events.EventDispatcher.extend({get:function(){return f.exec("Badge","get")},set:function(d){var e=this;return f.exec("Badge","set",[d]).success(function(b){e.trigger("change",{count:b})})},increment:function(d){var d=d||1,e=this,b=new Lavaca.util.Promise;this.get().success(function(i){e.set(i+d).success(b.resolver()).error(b.rejector())}).error(b.rejector());return b},decrement:function(d){return self.increment(-(d||1))},clear:function(){return this.set(0)}});f.register("badge",
d.Badge)})(Lavaca.env,Lavaca.env.Device);(function(d,f){d.ChildBrowser=Lavaca.events.EventDispatcher.extend({showWebPage:function(d){if(f.isCordova())return f.exec("ChildBrowser","showWebPage",[d]).error(function(){window.location.href=d});window.open(d);return(new Lavaca.util.Promise(window)).resolve()},close:function(){return f.exec("ChildBrowser","close",[])}});f.register("childBrowser",d.ChildBrowser)})(Lavaca.env,Lavaca.env.Device);
(function(d,f,h){function e(d,a,c,g,e){c===b&&(c=a,a="");g||(g=[]);var g=[].concat(g),j=-1,f=g.length,c=[c,function(a){d=="confirm"&&(a===b||a===f||f===0&&a==2)?e.reject((f||2)-1):e.resolve(a-1)},a],h=[];for("confirm"==d&&g.push(g.shift());a=g[++j];)if(h.push(a.name),a.exec)e["confirm"==d&&j==g.length-1?"error":"success"](function(a,c){return function(d){d===b&&(d=f);d==a&&c(a)}}(j,a.exec));c.push(h.join(","));navigator.notification[d].apply(navigator.notification,c)}var b;d.Notification=Lavaca.events.EventDispatcher.extend({alert:function(b,
a,c){var d=new h;f.isCordova()?e("alert",b,a,c,d):window.alert?((button=(c||[])[0])&&button.exec&&d.then(button.exec),alert(a||b),d.resolve(0)):d.reject();return d},confirm:function(b,a,c){var d=new h;f.isCordova()?e("confirm",b,a,c,d):window.confirm?(c&&d.success((c[1]||{}).exec).error((c[0]||{}).exec),confirm(a)?d.resolve(1):d.reject(0)):d.reject();return d}});f.register("notification",d.Notification)})(Lavaca.env,Lavaca.env.Device,Lavaca.util.Promise);
(function(d,f){var h={animation:["animation","animationend","keyframes"],webkitAnimation:["-webkit-animation","webkitAnimationEnd","-webkit-keyframes"],MozAnimation:["-moz-animation","animationend","-moz-keyframes"],OAnimation:["-o-animation","oAnimationEnd","-o-keyframes"],MSAnimation:["-ms-animation","MSAnimationEnd","-ms-keyframes"]},e,b,i,a;(function(){var c=document.createElement("div").style,d;for(d in h)if(d in c){c=h[d];e=d;b=c[0];a=c[1];i=c[2];break}})();d.isSupported=function(){return!!e};
d.keyframesToCSS=function(a,b){var d=Lavaca.fx.Transform,e=["@",i," ",a,"{"],f,h,m,l;for(f in b){e.push(f,"{");h=b[f];if("string"==typeof h)e.push(h);else for(m in h)l=h[m],"transform"==m&&d&&(m=d.cssProperty(),l=d.toCSS(l)),e.push(m,":",l,";");e.push("}")}e.push("}");return e.join("")};d.generateKeyframes=function(a,b){"object"==typeof a&&(b=a,a="a"+(new Date).getTime());var e=d.keyframesToCSS(a,b);f("<style>"+e+"</style>").appendTo("head");return a};d.cssProperty=function(){return b};f.fn.keyframe=
function(a,b,e,i,f,h,m){d.isSupported()&&("object"==typeof a&&(a=d.generateKeyframes(a)),"object"==typeof b&&(m=b.complete,h=b.direction,f=b.iterations,i=b.delay,e=b.easing,b=b.duration),h=h||"normal",f=f||1,i=i||0,e=e||"linear",b=b||1,"number"==typeof b&&(b+="ms"),"number"==typeof i&&(i+="ms"),m&&this.nextAnimationEnd(m),this.css(d.cssProperty(),[a,b,e,i,f,h].join(" ")));return this};f.fn.animationEnd=function(c,b){return a?this.on(a,c,b):this};f.fn.nextAnimationEnd=function(c,b){return a?this.one(a,
c,b):this}})(Lavaca.resolve("Lavaca.fx.Animation",!0),Lavaca.$);
(function(d,f){function h(a,b){var d=0==a.indexOf("rotate"),e="scale"==a,i=0==a.indexOf("translate");/(X|Y|Z)$/.test(a);var f,h=[];if("object"==typeof b)for(f in b)h.push(a+f.toUpperCase()+"("+(i?"number"==typeof b[f]?b[f]+"px":b[f]:d?"number"==typeof b[f]?b[f]+"deg":b[f]:e?"number"==typeof b[f]?b[f]+","+b[f]:b[f]:b[f])+")");else e?b="number"==typeof b?b+","+b:b:d?b="number"==typeof b?b+"deg":b:i&&(b="number"==typeof b?b+"px":b),h.push(a+"("+b+")");return h.join(" ")}var e={transform:"transform",
webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",MSTransform:"-ms-transform"},b,i,a=!1;(function(){var c=document.createElement("div").style,d;for(d in e)if(d in c){b=d;i=e[d];c[d]="translate3d(0,0,0)";a=-1<c[d].indexOf("translate3d")&&-1==navigator.userAgent.indexOf("Android");break}})();d.isSupported=function(){return!!b};d.is3dSupported=function(){return a};d.toCSS=function(a){var b=[],d;if("object"==typeof a)for(d in a)b.push(h(d,a[d]));else b.push(a);
return b.join(" ")};d.cssProperty=function(){return i};f.fn.transform=function(a,g){d.isSupported()&&(a=d.toCSS(a),g&&"object"==typeof g&&(g=("number"==typeof g.x?100*g.x+"%":g.x)+(void 0===g.y?"":" "+("number"==typeof g.y?100*g.y+"%":g.y))),this.each(function(){this.style[b]=a;g&&(this.style[b+"Origin"]=g)}));return this}})(Lavaca.resolve("Lavaca.fx.Transform",!0),Lavaca.$);
(function(d,f){var h={transition:["transition","transitionend"],webkitTransition:["-webkit-transition","webkitTransitionEnd"],MozTransition:["-moz-transition","MozTransitionEnd"],OTransition:["-o-transition","OTransitionEnd"],MSTransition:["-ms-transition","MSTransitionEnd"]},e,b,i;(function(){var a=document.createElement("div").style,c;for(c in h)if(c in a){e=c;b=h[c][0];i=h[c][1];break}})();d.isSupported=function(){return!!e};d.toCSS=function(a,b,d){var d=d||"linear",e=[],i=a instanceof Array,f;
for(f in a)i&&(f=a[f]),e.push(f+" "+b+"ms "+d);return e.join(",")};d.cssProperty=function(){return b};f.fn.transition=function(a,b,g,i){if(d.isSupported()){g instanceof Function&&(i=g,g=null);var f=d.toCSS(a,b,g);i&&this.nextTransitionEnd(i);this.each(function(){this.style[e]=f});this.css(a)}else this.css(a),i&&i.call(this[0],{});return this};f.fn.transitionEnd=function(a,b){return i?this.on(i,a,b):this};f.fn.nextTransitionEnd=function(a,b){return i?this.one(i,a,b):this}})(Lavaca.resolve("Lavaca.fx.Transition",
!0),Lavaca.$);
(function(d,f,h,e){d.Controller=f.extend(function(b,e){b instanceof d.Controller?(this.router=b.router,this.viewManager=b.viewManager):(this.router=b,this.viewManager=e)},{router:null,viewManager:null,exec:function(b,d,a){this.params=d;this.state=a;var c=new h(this),g;a&&(g=a.state,c.success(function(){document.title=a.title}));b=this[b](d,g);b instanceof h?c.when(b):c.resolve();return c},ajax:function(b){return h.when(this,Lavaca.net.Connectivity.ajax(b))},view:function(b,d,a,c){return h.when(this,this.viewManager.load(b,
d,a,c))},ajaxThenView:function(b,d,a,c,g){var e=new h(this),f=this;this.ajax(b).success(function(b){e.when(this.view(a,c,d.apply(f,arguments),g))}).error(function(){e.reject.apply(e,arguments)});return e},history:function(b,d,a){var c=!this.state;return function(){c&&Lavaca.net.History.push(b,d,a)}},translate:function(b,d){var a=Lavaca.util.Translation.get(b);a&&d&&(a=e.format.apply(null,[a].concat(d)));return a},url:function(b,d){return e.format(b,d,encodeURIComponent)},redirect:function(b,d){return this.router.unlock().exec(this.url(b,
d||[]))},ajaxThenRedirect:function(b,d){var a=new h(this),c=this;this.ajax(b).success(function(b){a.when(this.redirect(d.apply(c,arguments)))}).error(function(){a.reject.apply(a,arguments)});return a},dispose:function(){this.router=this.viewManager=null;f.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise,Lavaca.util.StringUtils,Lavaca.$);
(function(d,f,h,e,b){function i(a,b,d,e,i,f){a.trigger(b,{attribute:d,previous:e===c?null:e,value:i===c?a.get(d):i,messages:f||[]})}function a(a,b,c){for(var b=!!b,d=["suppressValidation","suppressEvents","suppressTracking"],e={},i=-1,f;f=d[++i];)e[f]=a[f],a[f]=b||a[f];b=c.call(a);for(i=-1;f=d[++i];)a[f]=e[f];return b}var c;d.Model=f.extend(function(a){f.call(this);this.attributes=new h;this.rules=new h;this.unsavedAttributes=[];this.flags={};a&&(this.suppressEvents=this.suppressTracking=!0,this.apply(a),
this.suppressEvents=this.suppressTracking=!1)},{suppressValidation:!1,suppressTracking:!1,get:function(a){return this.attributes.get(a)},canSet:function(){return!0},set:function(c,d,e,f){return a(this,f,function(){if(!this.canSet(c))return!1;var a=this.attributes.get(c),f=this.suppressValidation?[]:this.validate(c,d);if(f.length)return i(this,"invalid",c,a,d,f),!1;a!==d&&(this.attributes.set(c,d),e&&((f=this.flags[e])||(f=this.flags[e]=[]),b.contains(f,c)||f.push(c)),i(this,"change",c,a,d),!this.suppressTracking&&
!Lavaca.util.ArrayUtils.contains(this.unsavedAttributes,c)&&this.unsavedAttributes.push(c));return!0})},has:function(a){return null!==this.get(a)},idAttribute:"id",id:function(){return this.get(this.idAttribute)},isNew:function(){return null===this.id()},parse:function(a){"string"==typeof a&&(a=JSON.parse(a));return a},apply:function(b,c){a(this,c,function(){b=this.parse(b);for(var a in b)this.set(a,b[a])})},clear:function(a){if(a){var a=this.flags[a],c=-1,d,e;if(a)for(;d=a[++c];)b.remove(this.unsavedAttributes,
d),(e=this.get(d))&&e.dispose&&e.dispose(),this.set(d,null)}else this.attributes.dispose(),this.attributes=new h,this.unsavedAttributes.length=0},clone:function(){return new this.constructor(this.attributes.toObject())},addRule:function(a,b,c){this.rules.get(a,[]).push({rule:b,message:c})},validate:function(a,b){var d,e,f=-1,i;if(a){if(d=[],b=b===c?this.get(a,b):b,e=this.rules.get(a))for(;i=e[++f];)i.rule(a,b)||d.push(i.message)}else d={},this.rules.each(function(){d[a]=this.validate(a)},this);return d},
onFetchSuccess:function(a){a=this.parse(a);this.apply(a,!0);this.trigger("fetchSuccess",{response:a})},onFetchError:function(a){this.trigger("fetchError",{response:a})},fetch:function(a,b){b=Lavaca.clone(b||{});b.url=a;return e.when(this,Lavaca.net.Connectivity.ajax(b)).success(this.onFetchSuccess).error(this.onFetchError)},save:function(a,b){for(var d=new e(this),i=this.toObject(),f={},h=-1,l;l=this.unsavedAttributes[++h];)f[l]=i[l];d.success(function(a){var b=this.idAttribute;this.isNew()&&a[b]!==
c&&this.set(b,a[b]);this.unsavedAttributes=[];this.trigger("saveSuccess",{response:a})}).error(function(a){this.trigger("saveError",{response:a})});i=a.call(b||this,this,f,i);i instanceof e?d.when(i):i?d.resolve(i):d.reject(i);return d},saveToServer:function(a){return this.save(function(b,c,d){b=this.id();this.isNew()?c=d:c[this.idAttribute]=b;return e.when(this,Lavaca.net.Connectivity.ajax({url:a,cache:!1,type:"POST",data:c,dataType:"json"}))})},toObject:function(){return this.attributes.toObject()},
toJSON:function(){return JSON.stringify(this.toObject())},on:function(a,b,c,d){function e(a){if(!b||a.attribute==b)c.call(d||this,a)}"function"==typeof b&&(d=c,c=b,b=null);e.fn=c;e.thisp=d;return f.prototype.on.call(this,a,e,d)}});d.Model.SENSITIVE="sensitive"})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.events.EventDispatcher,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(d,f,h,e,b){function i(a,b,d,e,i){a.trigger(b,{previousIndex:d,index:e,model:i})}d.Collection=f.extend(function(a,b){f.call(this,b);this.models=[];this.changedOrder=!1;this.addedItems=[];this.removedItems=[];this.changedItems=[];a&&(this.suppressEvents=!0,this.add.apply(this,a),this.suppressEvents=!1)},{TModel:d.Model,itemsProperty:"items",clear:function(){f.prototype.clear.apply(this,arguments);for(var a=-1,b;b=this.models[++a];)this.remove(b);this.changedOrder=!1;this.addedItems.length=
this.removedItems.length=this.changedItems.length=this.models.length=0},prepare:function(a){a=a instanceof this.TModel?a:this.TModel.prototype instanceof d.Collection?new this.TModel(a[this.TModel.prototype.itemsProperty],a):new this.TModel(a);if(-1==b.indexOf(this.models,a))a.on("change",this.onItemEvent,this).on("invalid",this.onItemEvent,this).on("saveSuccess",this.onItemEvent,this).on("saveError",this.onItemEvent,this);return a},canSet:function(a){return a!=this.itemsProperty},add:function(){var a=
!1,c,d,e,f,h;c=0;for(d=arguments.length;c<d;c++)if(e=arguments[c],f=e instanceof this.TModel,e=this.prepare(e),h=b.indexOf(this.models,e),!f||!b.contains(this.models,e))this.models.push(e),this.suppressTracking||(b.remove(this.removedItems,e),b.remove(this.changedItems,e),b.pushIfNotExists(this.addedItems,e)),i(this,"addItem",null,h,e),a=!0;return a},moveTo:function(a,c){a instanceof this.TModel&&(a=b.indexOf(this.models,a));if(-1<a){var d=this.models.splice(a,1)[0];d&&(this.models.splice(c,0,d),
this.suppressTracking||(this.changedOrder=!0),i(this,"moveItem",a,c,d))}},remove:function(a){if(a instanceof this.TModel){var c=b.remove(this.models,a);return-1<c?(this.suppressTracking||(b.remove(this.addedItems,a),b.remove(this.changedItems,a),b.pushIfNotExists(this.removedItems,a)),a.off("change",this.onItemEvent).off("invalid",this.onItemEvent).off("saveSuccess",this.onItemEvent).off("saveError",this.onItemEvent),i(this,"removeItem",c,null,a),!0):!1}for(var c=this.filter(a),d=-1,e=!1;a=c[++d];)e=
this.remove(a)||e;return e},filter:function(a,b){var b=void 0===b?Number.MAX_VALUE:b,d=[],e=-1,i,f,h;"function"!=typeof a&&(f=a,a=function(a,b){for(h in f)if(b.get(h)!=f[h])return!1;return!0});for(;(i=this.models[++e])&&(!a(e,i)||!(d.push(i),1>--b)););return d},first:function(a){return this.filter(a,1)[0]||null},itemAt:function(a){return this.models[a]},count:function(){return this.models.length},each:function(a,b){for(var d=-1,e;e=this.itemAt(++d);)a.call(b||this,d,e)},onItemEvent:function(a){var c=
a.target,d=b.indexOf(this.models,c);"change"==a.type?b.pushIfNotExists(this.changedItems,c):"saveSuccess"==a.type&&b.remove(this.changedItems,c);this.trigger(a.type+"Item",Lavaca.merge({},a,{target:c,model:c,index:d,previousIndex:null}))},onFetchSuccess:function(a){var b=a=this.parse(a);b instanceof Array||(this.apply(a),b=a[this.itemsProperty]);this.add.apply(this,b);this.trigger("fetchSuccess",{response:a})},saveToServer:function(a){return this.save(function(b,d,i){b=this.id();this.isNew()?d=i:
d[this.idAttribute]=b;return(new e(this)).when(Lavaca.net.Connectivity.ajax({url:a,cache:!1,type:"POST",data:d,dataType:"json"}))})},toObject:function(a){for(var b=f.prototype.toObject.apply(this,arguments),d=this.itemsProperty,e=b[d]=[],i=-1,h;h=this.models[++i];)e[b[d].length]=a&&!h.isNew()?h.id():h.toObject();return b}})})(Lavaca.mvc,Lavaca.mvc.Model,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(d,f){function h(){return RegExp("\\{\\*(.*?)\\}","g")}function e(b){b=decodeURIComponent(b);isNaN(b)?"true"==b.toLowerCase()?b=!0:"false"==b.toLowerCase()?b=!1:RegExp("^\\d{4}-[0-1]\\d-[0-3]\\d$","g").test(b)&&(b=b.split("-"),b=new Date(Number(b[0]),Number(b[1])-1,Number(b[2]))):b=Number(b);return b}d.Route=f.extend(function(b,d,a,c){f.call(this);this.pattern=b;this.TController=d;this.action=a;this.params=c||{}},{matches:function(b){var d;d=this.pattern;if("/"==d)d=RegExp("^\\/(\\?.*)?(#.*)?$",
"g");else{"/"==d.charAt(0)&&(d=d.slice(1));d=d.split("/");for(var a="^",c=-1,e;e=d[++c];)a=h().test(e)?a+"(/([^/?#]+))*?":RegExp("\\{([^\\/]*?)\\}","g").test(e)?a+"/([^/?#]+)":a+("/"+e);d=RegExp(a+"(\\?.*)?(#.*)?$","g")}return d.test(b)},parse:function(b){var d=Lavaca.clone(this.params),a=this.pattern.slice(1),c=b.split("#"),g,f,j;d.url=b;d.route=this;c=c[1]?c[1].split("?"):c[0].split("?");if(g=c[1]){b=-1;for(g=g.split("&");f=g[++b];)f=f.split("="),j=decodeURIComponent(f[0]),void 0!==d[j]?(d[j]instanceof
Array||(d[j]=[d[j]]),d[j].push(e(f[1]))):d[j]=e(f[1])}b=0;c=c[0].replace(/(^(http(s?)\:\/\/[^\/]+)?\/?)|(\/$)/,"");f=RegExp(a.replace(h(),"(.+)").replace(RegExp("\\{([^\\/]*?)\\}","g"),"([^/]+)"));c=f.exec(c);for(g=f.exec(a);f=c[++b];)a=g[b],h().test(a)&&(f=f.split("/")),d[a.replace(RegExp("[\\{\\}\\*]","g"),"")]=f;return d},exec:function(b,d,a,c,e){function f(){Lavaca.delay(h.dispose,h)}var h=new this.TController(d,a),b=this.parse(b),c=h.exec(this.action,Lavaca.merge(b,e),c);c.then(f,f);return c}})})(Lavaca.resolve("Lavaca.mvc",
!0),Lavaca.util.Disposable);
(function(d,f,h){d.Router=f.extend(function(d){f.call(this);this.routes=[];this.viewManager=d;this.onpopstate=function(b){this.hasNavigated&&this.exec(b.url,b)};Lavaca.net.History.on("popstate",this.onpopstate,this)},{locked:!1,hasNavigated:!1,add:function(e,b,f,a){if("object"==typeof e)for(var c in e)a=e[c],a instanceof Array?(b=a[0],f=a[1],a=a[2]):(b=a.controller,f=a.action,a=a.params),this.add(c,b,f,a);else this.routes.push(new d.Route(e,b,f,a));return this},exec:function(d,b,f){if(this.locked)return(new h(this)).reject("locked");
this.locked=!0;d||(d="/");0==d.indexOf("http")&&(d=d.replace(/^http(s?):\/\/.+?/,""));var a=-1,c,g=new h(this);g.always(function(){this.unlock()});for(this.hasNavigated||g.success(function(){this.hasNavigated=!0});c=this.routes[++a];)if(c.matches(d))return g.when(c.exec(d,this,this.viewManager,b,f));return g.reject(d,b)},unlock:function(){this.locked=!1;return this},dispose:function(){this.onpopstate&&(Lavaca.net.History.off("popstate",this.onpopstate),this.onpopstate=null);f.prototype.dispose.apply(this,
arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise);
(function(d,f,h,e){d.View=h.extend(function(b,d,a,c){h.call(this);this.model=b||null;this.layer=d||0;this.eventMap=a||{};this.widgetMap=c||{};this.widgets=new Lavaca.util.Cache;this.on("rendersuccess",this.onRenderSuccess).on("rendererror",this.onRenderError)},{el:null,shell:null,template:null,className:null,wrapper:function(){return f('<div class="view"></div>')},interior:function(){return f('<div class="view-interior"></div>')},render:function(){var b=new e(this),f=Lavaca.ui.Template.get(this.template),
a=this.model;a instanceof d.Model&&(a=a.toObject());this.el&&this.el.remove();this.shell=this.wrapper();this.el=this.interior();this.shell.append(this.el);this.shell.attr("data-layer-index",this.layer);this.className&&this.shell.addClass(this.className);b.success(function(a){this.trigger("rendersuccess",{html:a})}).error(function(a){this.trigger("rendererror",{err:a})});this.shell.addClass("tmpl-"+this.template.toLowerCase().replace(/\s/g,"-"));f.render(a).success(b.resolver()).error(b.rejector());
return b},clearModelEvents:function(){var b,d;if(this.eventMap&&this.eventMap.model&&this.model&&this.model instanceof h)for(b in this.eventMap.model)d=this.eventMap.model[b],"object"==typeof d&&(d=d.on),this.model.off(b,d,this)},applyEvents:function(){var b=this.el,d,a,c,e,f;for(c in this.eventMap)for(e in d=this.eventMap[c],d)if(a=d[e],"object"==typeof a?(f=a,a=a.on):f=void 0,"model"==c){if(this.model&&this.model instanceof h)this.model.on(e,a,this)}else if("tap"==e&&b.tap)b.tap(c,a);else if("taphold"==
e&&b.taphold)b.taphold(c,a,f?f.duration:void 0);else if("swipe"==e&&b.swipe)b.swipe(c,a,f);else if("animationEnd"==e&&b.animationEnd)b.animationEnd(c,a);else if("transitionEnd"==e&&b.transitionEnd)b.transitionEnd(c,a);else b.on(e,c,a)},mapEvent:function(b,d,a){var c;if("object"==typeof b)for(b in c=b,c)for(d in c[b])this.mapEvent(b,d,c[b][d]);else(c=this.eventMap[b])||(c=this.eventMap[b]={}),c[d]=a;return this},createWidgets:function(){var b=this.widgets,d,a,c;for(a in this.widgetMap)c=this.widgetMap[a],
("self"==a?this.el:this.el.find(a)).each(function(a,e){d=new c(f(e));b.set(d.id,d)})},mapWidget:function(b,d){if("object"==typeof b){var a=b;for(b in a)this.mapWidget(b,a[b])}else this.widgetMap[b]=d;return this},insertInto:function(b){if(!this.shell.parent()[0]!=b[0]){for(var d=b.children("[data-layer-index]"),a=-1,c;c=d[++a];)if(c=f(c),c.attr("data-layer-index")>this.index){this.shell.insertBefore(c);return}b.append(this.shell)}},enter:function(b){var d=new e(this),a,b=f(b);this.hasRendered||(a=
this.render().error(d.rejector()));this.insertInto(b);a?d.when(a):Lavaca.delay(d.resolver());d.then(function(){this.trigger("enter")});return d},exit:function(){var b=new e(this);this.shell.remove();Lavaca.delay(b.resolver());b.then(function(){this.trigger("exit")});return b},onRenderSuccess:function(b){this.el.html(b.html);this.applyEvents(this.el);this.createWidgets(this.el);this.hasRendered=!0},onRenderError:function(b){Lavaca.log(b.err)},dispose:function(){this.model&&this.clearModelEvents();
this.template=this.model=null;h.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.$,Lavaca.events.EventDispatcher,Lavaca.util.Promise);
(function(d,f,h,e,b,i){d.ViewManager=b.extend(function(a){b.call(this);this.el=h(a||document.body);this.views=new f.Cache;this.layers=[];this.exitingViews=[];this.enteringViews=[]},{locked:!1,load:function(a,b,d,f){function i(){h.enteringViews=[k];m.success(function(){Lavaca.delay(function(){h.enteringViews=[]})});p=h.dismissLayersAbove(f-1,k);h.layers[f]!=k?(l.when(k.enter(h.el,h.exitingViews),p).then(m.resolve),h.layers[f]=k):m.when(p)}if(this.locked)return(new e(this)).reject("locked");this.locked=
!0;var f=f||0,h=this,k=this.views.get(a),m=new e(this),l=new e(m),q=null,p=null;m.always(function(){this.locked=!1});k||(k=new b(d,f),q=k.render(),null!==a&&(this.views.set(a,k),k.cacheKey=a));q?q.then(i,m.rejector()):i();return m},dismiss:function(a){if("number"==typeof a)this.dismissLayersAbove(a-1);else if(a instanceof Lavaca.mvc.View)this.dismiss(a.layer);else{var a=h(a),b=a.attr("data-layer-index");null===b&&(a=a.closest("[data-layer-index]"),b=a.attr("data-layer-index"));null!==b&&this.dismiss(Number(b))}},
dismissLayersAbove:function(a,b){var d=new e(this),f=!1,h,o;for(h=this.layers.length-1;h>a;h--)if((o=this.layers[h])&&(!b||b!=o))(function(a){this.exitingViews.push(a);d.when(a.exit(this.el,this.enteringViews)).success(function(){Lavaca.delay(function(){i.remove(this.exitingViews,a);(!a.cacheKey||b&&b.cacheKey==a.cacheKey)&&a.dispose()},this)});this.layers[h]=null}).call(this,o),f=!0;f||d.resolve();return d},flush:function(){for(var a=-1,b;b=this.layers[++a];)b.cacheKey&&this.views.remove(b.cacheKey);
this.views.dispose();this.views=new f.Cache},dispose:function(){b.prototype.dispose.call(this)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util,Lavaca.$,Lavaca.util.Promise,Lavaca.util.Disposable,Lavaca.util.ArrayUtils);
(function(d,f,h){function e(b){b.preventDefault();b.stopPropagation()}d.Application=f.extend(function(b){Lavaca.env.Device.init(h.proxy(this.init,this));h(window).on("unload",h.proxy(this.dispose,this));if(b)this.on("init",b)},{TViewManager:Lavaca.mvc.ViewManager,TRouter:Lavaca.mvc.Router,TState:Lavaca.mvc.Model,animations:-1==navigator.userAgent.indexOf("Android"),initRoute:"/",initState:null,initParams:null,initLocale:"en_US",viewRootSelector:"#view-root",onInvalidRoute:function(b){"locked"!=b&&
plugins.notification.alert("An error occurred while trying to display this URL.")},onTapLink:function(b){var d=h(b.currentTarget),a=d.attr("href"),c=d.attr("rel"),e=d.attr("target");if(/^((mailto)|(tel)|(sms))\:/.test(a))return location.href=a,!0;b.preventDefault();"back"==c?Lavaca.net.History.back():"nofollow"==c||"_blank"==e?(b.stopPropagation(),plugins.childBrowser.showWebPage(a)):"cancel"==c?this.viewManager.dismiss(b.currentTarget):a&&this.router.exec(a,null,d.dataAttrs()).error(this.onInvalidRoute)},
ajax:function(){return Lavaca.net.Connectivity.ajax.apply(Lavaca.net.Connectivity,arguments)},init:function(){var b=new Lavaca.util.Promise(this);this.state=new this.TState;Lavaca.util.Config.init();this.state.set("lang",localStorage.getItem("app:lang")||this.initLocale);Lavaca.util.Translation.init(app.state.get("lang"));Lavaca.ui.Template.init();this.viewManager=new this.TViewManager(this.viewRootSelector);this.router=new this.TRouter(this.viewManager);h(document.body).tap("a",this.onTapLink,this).tap(".ui-blocker",
e);this.trigger("init");this.router.hasNavigated?b.resolve():(b.when(this.router.exec(this.initRoute,this.initState,this.initParams)),this.initState&&Lavaca.net.History.replace(this.initState.state,this.initState.title,this.initState.url));return b.then(function(){this.trigger("ready")})},dispose:function(){this.trigger("dispose");Lavaca.util.Config.dispose();Lavaca.util.Translation.dispose();Lavaca.ui.Template.dispose();f.prototype.dispose.call(this)}})})(Lavaca.mvc,Lavaca.events.EventDispatcher,
Lavaca.$);(function(d,f){function h(){throw"Not implemented";}d.Store=f.extend(function(d){this.id=d},{get:function(){h()},set:function(){h()},remove:function(){h()},all:function(){h()}})})(Lavaca.resolve("Lavaca.storage",!0),Lavaca.util.Disposable);
(function(d,f,h){function e(b){localStorage.setItem(b.id+"@manifest",JSON.stringify(b.manifest))}d.LocalStore=d.Store.extend(function(b){d.Store.call(this,b);this.manifest=JSON.parse(localStorage.getItem(this.id+"@manifest")||"[]")},{key:function(b){return this.id+":"+b},get:function(b){return(b=localStorage.getItem(this.key(b)))?JSON.parse(f.decompress(b)):null},set:function(b,d){localStorage.setItem(this.key(b),f.compress(JSON.stringify(d)));h.pushIfNotExists(this.manifest,b);e(this)},remove:function(b){localStorage.removeItem(this.key(b));
h.remove(this.manifest,b);e(this)},all:function(){for(var b=[],d=-1,a;a=this.manifest[++d];)b.push(this.get(a));return b}})})(Lavaca.resolve("Lavaca.storage"),Lavaca.util.StringUtils,Lavaca.util.ArrayUtils);
(function(d,f){function h(a){if(a==i)for(var c=-1,d;d=b[++c];)d(a)}var e="boolean"==typeof navigator.onLine,b=[],i="offline";navigator.userAgent.indexOf("Android");d.isOffline=function(){var a=Lavaca.resolve("navigator.network.connection.type");return null!==a?a==Lavaca.resolve("Connection.NONE"):e?!navigator.onLine:!1};d.ajax=function(a){var b=new Lavaca.util.Promise,e=a.success,n=a.error;a.success=function(){e&&e.apply(this,arguments);b.resolve.apply(b,arguments)};a.error=function(){n&&n.apply(this,
arguments);b.reject.apply(b,arguments)};d.isOffline()?b.reject(i):f.ajax(a);b.error(h);return b};d.registerOfflineAjaxHandler=function(a){b.push(a)}})(Lavaca.resolve("Lavaca.net.Connectivity",!0),Lavaca.$);
(function(d,f,h){function e(b,c,d,e,f,g){b.position=c;e={id:d,state:e,title:f,url:g};b.sequence[c]=e;location.hash=a=g+"#@"+d;return e}var b=!(-1<navigator.userAgent.indexOf("Android"))&&"function"==typeof h.pushState,i=!1,a,c,g=0;d.History=f.extend(function(){f.call(this);this.sequence=[];this.position=-1;this.replace({},document.title,location.pathname);var c=this;b?(this.onPopState=function(a){a.state&&(g--,c.trigger("popstate",{state:a.state.state,title:a.state.title,url:a.state.url}))},window.addEventListener("popstate",
this.onPopState,!1)):(this.onPopState=function(){var b=location.hash,d,e,f=-1;b&&(b=b.replace(/^#/,""));if(b!=a&&(a=b)){g--;for(b=b.split("#@")[1];e=c.sequence[++f];)if(e.id==b){d=e;this.position=f;break}d&&(location.hash=d.url+"#@"+d.id,document.title=d.title,c.trigger("popstate",{state:d.state,title:d.title,url:d.url}))}},window.attachEvent?window.attachEvent("onhashchange",this.onPopState):window.addEventListener("hashchange",this.onPopState,!1))},{current:function(){return this.sequence[this.position]||
null},hasHistory:function(){return 0<g},push:function(a,c,d){g++;i?(document.title=c,b?h.pushState({state:a,title:c,url:d},c,d):e(this,++this.position,Lavaca.uuid(),a,c,d)):this.replace(a,c,d)},replace:function(a,c,d){i=!0;document.title=c;if(b)h.replaceState({state:a,title:c,url:d},c,d);else{0>this.position&&(this.position=0);var f=this.current()||{id:Lavaca.uuid()};e(this,this.position,f.id,a,c,d)}},dispose:function(){this.onPopState&&(b?window.removeEventListener("popstate",this.onPopState,!1):
window.detachEvent?window.detachEvent("onhashchange",this.onPopState):window.removeEventListener("hashchange",this.onPopState,!1));f.prototype.dispose.call(this)}});d.History.init=function(a){c||(a&&d.History.overrideStandardsMode(),c=new d.History);return c};d.History.push=function(){d.History.init().push.apply(c,arguments)};d.History.replace=function(){d.History.init().replace.apply(c,arguments)};d.History.back=function(){h.back()};d.History.forward=function(){h.forward()};d.History.dispose=function(){_history&&
(c.dispose(),c=null)};d.History.on=function(){return d.History.init().on.apply(c,arguments)};d.History.off=function(){return d.History.init().off.apply(c,arguments)};d.History.overrideStandardsMode=function(){b=!1}})(Lavaca.resolve("Lavaca.net",!0),Lavaca.events.EventDispatcher,window.history);
(function(d,f,h){var e=new Lavaca.util.Cache,b=[];d.Template=h.extend({compile:function(){},render:function(){throw"Abstract";},process:function(b){this.code=b}});d.Template.get=function(b){return e.get(b)};d.Template.init=function(d){for(var a=-1,c;c=b[++a];)h.init(e,c.mime,function(a,b,d){return new c.js(a,b,d)},d)};d.Template.dispose=function(){h.dispose(e)};d.Template.render=function(b,a){var c=d.Template.get(b);if(c)return c.render(a);throw'No template named "'+b+'"';};d.Template.register=function(d,
a){b[b.length]={mime:d,js:a}}})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.util.Map);
(function(d,f,h,e){d.DustTemplate=h.extend(function(b,d,a){h.apply(this,arguments);var c=this.prepareHelper(),e;for(e in c)f.helpers[e]=c[e]},{prepareHelper:function(){return{msg:this.helperMsg,include:this.helperInclude}},helperMsg:function(b,d,a){for(var c=b.tail,f=c.renderBody("block",b,d,a),h=c.params[h],f=[e.get(f,h)||""],h=-1,j;j=c.params["p"+ ++h];)f.push(j.render(b,d,a));return Lavaca.util.StringUtils.format.apply(this,f)},helperInclude:function(b,d,a){var b=b.tail.params.name.render(b,d,
a),c;h.render(b,a).then(function(a){c=a});return c},compile:function(){h.prototype.compile.call(this);f.compile(this.code,this.name)},render:function(b){var d=new Lavaca.util.Promise(this);!this.code&&this.src&&this.load(this.src);this.code&&!this.compiled&&(this.compile(),this.compiled=!0);f.render(this.name,b,function(a,b){a?d.reject(a):d.resolve(b)});return d},dispose:function(){delete f.templates[this.name];h.prototype.dispose.call(this)}});d.Template.register("text/x-dust-template",d.DustTemplate)})(Lavaca.ui,
xdust,Lavaca.ui.Template,Lavaca.util.Translation);(function(d,f,h){d.Widget=h.extend(function(d){h.call(this);this.el=d=f(d);var b=d.attr("id");b||(b="widget-"+Lavaca.uuid(),d.attr("id",b));this.id=b})})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.events.EventDispatcher);
(function(d,f,h,e){function b(a){return a?null:"error_required"}function i(a,b){return a&&!RegExp(b.attr("pattern")).test(a)?"error_pattern":null}function a(a){return a&&!/^\w+@\w+(\.\w+)*\.\w+$/.test(a)?"error_email":null}function c(a){return a&&!/^\d?(\d{3})?\d{7}$/.test(a.replace(/\D/g,""))?"error_email":null}function g(a){return a&&!/^\d+(\.\d+)?$/.test(a)?"error_number":null}function n(a){return a&&!/^https?:\/\/\w+(\.\w+)*\.\w(:\d+)?\/\S+$/.test(a)?"error_url":null}d.Form=h.extend(function(){h.apply(this,
arguments);var a=this;this.pendingSync={};this._onChangeInput=function(b){a.onChangeInput(b)};this._onSubmit=function(b){a.onSubmit(b)};this.el.on("submit",this._onSubmit);this.addRule(this.defaultRules())},{onSubmit:function(a){a.preventDefault();this.validate().success(this.onSubmitSuccess).error(this.onSubmitError)},onSubmitSuccess:function(){},onSubmitError:function(){},onChangeInput:function(a){if(this.model){var b=f(a.target),a=b.attr("name"),b=b.val();this.pendingSync[a]=!0;this.model.set(a,
b);this.pendingSync[a]=!1}},onChangeModel:function(a){this.pendingSync[a.attribute]||this.set(a.attribute,a.value)},bind:function(a){this.unbind();this.model=a;a.on("change",this.onChangeModel,this);this.el.on("change",this._onChangeInput)},unbind:function(){this.model&&(this.el.off("change",this._onChangeInput),this.model.off("change",this.onchangeModel,this),this.model=null)},input:function(a){return this.el.find("input, select, textarea").filter('[name="'+a+'"]')},get:function(a){return this.input(a).val()},
set:function(a,b){this.input(a).val(b||null)},defaultRules:function(){return{"[required]":b,"[pattern]":i,"[type=email]":a,"[type=tel]":c,"[type=number]":g,"[type=url]":n}},addRule:function(a,b){this.rules||(this.rules=[]);if("object"==typeof a)for(var c in a)this.addRule(c,a[c]);else this.rules.push({selector:a,callback:b})},values:function(){for(var a=this.el.find("input, select, textarea"),b={},c=-1,d,e,g;d=a[++c];)if(d=f(d),e=d.attr("type"),!("radio"==e||"checkbox"==e)||d[0].checked)e=d.attr("name"),
g=b[e],d=d.val(),g instanceof Array?g.push(d):b[e]=void 0!==g?[g,d]:d;return b},validate:function(a,b,c){a&&"function"!=typeof a&&(c=a,a=null);c&&(c=f(c));for(var d=null,g=new e(this),h=-1,i,n,s,u,y,A,B,E,H;n=this.rules[++h];){s=c?c.filter(n.selector):this.el.find(n.selector);for(i=-1;u=s[++i];)if(u=f(u),H=u.val(),y=n.callback.call(this,H,u,this))A=u.attr("name"),d||(d={}),d[A]||(E=u.attr("id"),B=null,E&&(B=this.el.find('label[for="'+E+'"]').text()),d[A]={id:E,name:A,label:B,el:u,value:H,messages:[]}),
d[A].messages.push(y)}d?g.reject(d):g.resolve(this.values());return g.error(function(a){this.trigger("invalid",{inputs:a})}).success(function(a){this.trigger("valid",a)}).success(a).error(b)},dispose:function(){this.unbind();h.prototype.dispose.call(this)}});d.Form.withSubmit=function(a,b){return d.Form.extend({onSubmitSuccess:function(b){a.call(this,b)},onSubmitError:function(a){b.call(this,a)}})}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,Lavaca.util.Promise);
(function(d,f,h){d.LoadingIndicator=h.extend({className:"loading",show:function(){this.el.addClass(this.className)},hide:function(){this.el.removeClass(this.className)}});d.LoadingIndicator.init=function(e){function b(){h.hide()}var e=e||d.LoadingIndicator,h=new e(document.body);f(document).on("ajaxStart",function(){h.show()}).on("ajaxStop",b).on("ajaxError",b);return h}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget);
(function(d,f,h,e){var b=["overflowScrolling","webkitOverflowScrolling","MozOverflowScrolling","OOverflowScrolling","MSOverflowScrolling"],i;(function(){for(var a=document.createElement("div").style,c=-1,d;d=b[++c];)if(d in a){i=d;break}})();d.Scrollable=h.extend(function(){h.apply(this,arguments);this.iScrollOptions||(this.iScrollOptions={});this.supportsOverflow?this.initOverflowScroll():(this.className="synthetic-scroll",this.initIScroll())},{supportsOverflow:!!i,className:"overflow-scroll",iScrollOptions:null,
wrapper:function(){return f('<div class="scroll-wrapper"></div>')},initOverflowScroll:function(){this.el.addClass(this.className);this.preventParentScroll()},initIScroll:function(){var a=this.wrapper(),b={},d,h;for(d in this.iScrollOptions)h=this.iScrollOptions[d],"function"==typeof h&&(h=f.proxy(h,this)),b[d]=h;h=b.onBeforeScrollStart;b.onBeforeScrollStart=function(a){var b=(a.explicitOriginalTarget||a.target).nodeName;"SELECT"!=b&&("OPTION"!=b&&"INPUT"!=b&&"TEXTAREA"!=b&&"LABEL"!=b)&&a.preventDefault();
h&&h.apply(this,arguments)};this.el.addClass(this.className);a.append(this.el.children());this.el.append(a);this.iScroll=new e(this.el[0],b);this.refresh()},refresh:function(){this.supportsOverflow||Lavaca.delay(function(){this.iScroll.refresh()},this,10)},preventParentScroll:function(){var a=this.el[0];this.el.on("touchstart",function(){startTopScroll=a.scrollTop;0>=startTopScroll&&(a.scrollTop=1);startTopScroll+a.offsetHeight>=a.scrollHeight&&(a.scrollTop=a.scrollHeight-a.offsetHeight-1)})},dispose:function(){this.isScroll&&
this.iScroll.destroy();h.prototype.dispose.call(this)}})})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,iScroll);
